
<!doctype html>
<html lang="en">




<head>
    <title>How to Build Peek v3 on RHEL8+Hyper-V - Attune Automation</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="title"
          content="How to Build Peek v3 on RHEL8+Hyper-V - Attune Automation">
    <meta name="description"
          content="">
    <meta name="robots"
          content="follow, index, max-snippet:-1, max-video-preview:-1, max-image-preview:large">

    <meta property="og:locale" content="en_AU" />
    <meta property="og:type" content="article" />
    <meta property="og:title"
          content="HowTo Build Peek v3 on RHEL8+Hyper-V - Attune Automation" />
    <meta property="og:description" content="" />
    <meta property="og:site_name" content="Attune Automation" />
    <meta property="article:section" content="IT Instruction" />

    <meta name="twitter:title"
          content="How to Build Peek v3 on RHEL8+Hyper-V - Attune Automation" />
    <meta name="twitter:description" content="" />

    <link rel="icon" href="https://www.servertribe.com/wp-content/uploads/2020/10/cropped-server_tribe_favicon-32x32.png" sizes="32x32">
    <link rel="icon" href="https://www.servertribe.com/wp-content/uploads/2020/10/cropped-server_tribe_favicon-192x192.png" sizes="192x192">
    <link rel="apple-touch-icon" href="https://www.servertribe.com/wp-content/uploads/2020/10/cropped-server_tribe_favicon-180x180.png">
    <meta name="msapplication-TileImage" content="https://www.servertribe.com/wp-content/uploads/2020/10/cropped-server_tribe_favicon-270x270.png">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
          crossorigin="anonymous">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="../styles/style.css">

</head>


<body>

<!-- Project breadcrumbs -->

<!-- Project breadcrumbs -->
<nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0">
        <li class="breadcrumb-item" aria-current="page">
            <a
                href="https://www.servertribe.com/"
                target="_blank">
                ServerTribe
            </a>
        </li>
        <li class="breadcrumb-item" aria-current="page">
            <a
                href="https://github.com/attune-Automation/"
                target="_blank">
                Attune Automation Projects
            </a>
        </li>
        <li class="breadcrumb-item">
            <a href="../index.html">
            Build nznp1pek1 RHEL8 + oVirt
            </a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">
            <strong>Build Peek v3 on RHEL8+Hyper-V</strong>
        </li>
    </ol>
</nav>

<!-- Blueprint Header -->

<div class="container px-0">
    <!-- Blueprint name and description -->
    <div class="row pt-5">
        <div class="col px-0">
            <h1 class="text-left">
                How to Build Peek v3 on RHEL8+Hyper-V
            </h1>
        </div>
    </div>

<!-- Blueprint Description -->
    <div class="row pt-4">
        <div class="col-6 px-0">
            <h6 class="text-left">
                This documentation is generated by
                <a href="https://www.servertribe.com/"
                    class="badge badge-primary"
                    target="_blank">
                    Attune
                </a>
            </h6>
        </div>
        <div class="col-6 align-self-end text-right px-0">
            <h6 class="text-right">
                <a href="https://www.youtube.com/@servertribe"
                    class="badge badge-secondary"
                    target="_blank">
                    YouTube
                </a>
                <a href="https://github.com/Attune-Automation"
                    class="badge badge-secondary"
                    target="_blank">
                    GitHub
                </a>
                <a href="https://discord.com/invite/3YpJsagqUn"
                    class="badge badge-secondary"
                    target="_blank">
                    Discord
                </a>
                <a href="https://www.linkedin.com/company/servertribe/"
                    class="badge badge-secondary"
                    target="_blank">
                    LinkedIn
                </a>
                <a href="http://doc.servertribe.com/"
                    class="badge badge-secondary"
                    target="_blank">
                    Documentation
                </a>
            </h6>
        </div>
    </div>
    <hr>
</div>

<div class="documentation">
    <div class="container px-0">
        <div class="row">

<!-- Blueprint ToC -->


            <div class="col-lg-2 px-0 pr-5">
                <div class="container px-0 pt-3 sticky-top">
                    <h6 class="pb-2">
                        <strong>Contents</strong>
                    </h6>
                    <h6 class="text-muted">
                        <a href="#top">
                            <strong>Build Peek v3 on RHEL8+Hyper-V</strong>
                        </a>
                    </h6>


    
        

                    <h6 class="text-muted pt-2">
                        <a href="#rhel8connecttorpmserverlink">
                            <strong>Step 1 -</strong> RHEL8 Connect to RPM Server (link)
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#rhel8hypervaddvirtualdisksforpeeklink">
                            <strong>Step 2 -</strong> RHEL8 HyperV Add Virtual Disks for Peek (Link)
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#linreboot">
                            <strong>Step 3 -</strong> LIN Reboot
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#linrebootwait">
                            <strong>Step 4 -</strong> LIN Reboot Wait
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linsetuplvm">
                            <strong>Step 5 -</strong> Peek v3 LIN Setup LVM
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linsetupvgs">
                            <strong>Step 5.1 -</strong> Peek v3 LIN Setup VGs
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linsetuphomelvs">
                            <strong>Step 5.2 -</strong> Peek v3 LIN Setup Home LVs
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linsetupbackuplv">
                            <strong>Step 5.3 -</strong> Peek v3 LIN Setup Backup LV
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linsetupdblvs">
                            <strong>Step 5.4 -</strong> Peek v3 LIN Setup DB LVs
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#bpapssdtsdsetupvar">
                            <strong>Step 5.5 -</strong> BPAPS SDTSD Setup /var
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#bpvorhrhelenablepowertoolsrepo">
                            <strong>Step 6 -</strong> BPVORH RHEL Enable Power Tools Repo
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#buildpeekv3serverrhel8">
                            <strong>Step 7 -</strong> Build Peek v3 Server RHEL8
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#rhel8setupos">
                            <strong>Step 7.1 -</strong> RHEL8 Setup OS
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#rhel8sosconfigureos">
                            <strong>Step 7.1.1 -</strong> RHEL8 SOS Configure OS
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#rhel8crpmdeployosconfigfiles">
                            <strong>Step 7.1.1.1 -</strong> RHEL8 CRPM Deploy OS Config Files
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8cosfixosconfigpermissions">
                            <strong>Step 7.1.1.2 -</strong> PONR8 COS Fix OS Config Permissions
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponrhel8sethostname">
                            <strong>Step 7.1.1.3 -</strong> PON RHEL8 Set Hostname
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponrhel8disableipv6">
                            <strong>Step 7.1.1.4 -</strong> PON RHEL8 Disable IPv6
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8cosupdatednsservers">
                            <strong>Step 7.1.1.5 -</strong> PONR8 COS Update DNS Servers
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8cossetuploginbanner">
                            <strong>Step 7.1.1.6 -</strong> PONR8 COS Setup Login Banner
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#rhel8sosinstallutilities">
                            <strong>Step 7.1.2 -</strong> RHEL8 SOS Install Utilities
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstallnettools">
                            <strong>Step 7.1.2.1 -</strong> PONR8 PU Install Net-Tools
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstallgit">
                            <strong>Step 7.1.2.2 -</strong> PONR8 PU Install Git
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstallrsyslog">
                            <strong>Step 7.1.2.3 -</strong> PONR8 PU Install rsyslog
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstallperl">
                            <strong>Step 7.1.2.4 -</strong> PONR8 PU Install Perl
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstalljq">
                            <strong>Step 7.1.2.5 -</strong> PONR8 PU Install JQ
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstallbzip2">
                            <strong>Step 7.1.2.6 -</strong> PONR8 PU Install Bzip2
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstallunzip">
                            <strong>Step 7.1.2.7 -</strong> PONR8 PU Install Unzip
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstallrsync">
                            <strong>Step 7.1.2.8 -</strong> PONR8 PU Install Rsync
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstalltelnet">
                            <strong>Step 7.1.2.9 -</strong> PONR8 PU Install Telnet
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstallwireshark">
                            <strong>Step 7.1.2.10 -</strong> PONR8 PU Install Wireshark
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstallnano">
                            <strong>Step 7.1.2.11 -</strong> PONR8 PU Install Nano
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8pudeploynmon">
                            <strong>Step 7.1.2.12 -</strong> PONR8 PU Deploy nmon
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstallnmon">
                            <strong>Step 7.1.2.13 -</strong> PONR8 PU Install nmon
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8pudeployiftop">
                            <strong>Step 7.1.2.14 -</strong> PONR8 PU Deploy iftop
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstalliftop">
                            <strong>Step 7.1.2.15 -</strong> PONR8 PU Install iftop
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8pudeployp7zip">
                            <strong>Step 7.1.2.16 -</strong> PONR8 PU Deploy p7zip
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstallp7zip">
                            <strong>Step 7.1.2.17 -</strong> PONR8 PU Install p7zip
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstallftp">
                            <strong>Step 7.1.2.18 -</strong> PONR8 PU Install FTP
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstallselinuxpolicycoreutils">
                            <strong>Step 7.1.2.19 -</strong> PONR8 PU Install SELinux PolicyCoreUtils
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8puinstallcifsutils">
                            <strong>Step 7.1.2.20 -</strong> PONR8 PU Install CIFS Utils
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#rhel8sossetupchronyntp">
                            <strong>Step 7.1.3 -</strong> RHEL8 SOS Setup Chrony NTP
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8chronydeployconfig">
                            <strong>Step 7.1.3.1 -</strong> PONR8 Chrony Deploy Config
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8chronyntpenableandrestartservice">
                            <strong>Step 7.1.3.2 -</strong> PONR8 Chrony NTP Enable and Restart Service
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8chronysetrealtimeclockutc">
                            <strong>Step 7.1.3.3 -</strong> PONR8 Chrony Set Real Time Clock UTC
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#ponr8chronyntpteststatus">
                            <strong>Step 7.1.3.4 -</strong> PONR8 Chrony NTP Test Status
                        </a>
                    </h6>



        

                    <h6 class="text-muted pt-2">
                        <a href="#peekconfigurefirewallrhel8">
                            <strong>Step 7.2 -</strong> Peek Configure Firewall RHEL8
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#cfr8commonfirewallconfiguration">
                            <strong>Step 7.2.1 -</strong> CFR8 Common Firewall Configuration
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#cfr8enabledeniedconnectionlogging">
                            <strong>Step 7.2.1.1 -</strong> CFR8 Enable Denied Connection Logging
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#cfr8createfirewalllogfile">
                            <strong>Step 7.2.1.2 -</strong> CFR8 Create Firewall Log File
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#cfr8clearfirewallconfig">
                            <strong>Step 7.2.1.3 -</strong> CFR8 Clear Firewall Config
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#cfr8allowssh">
                            <strong>Step 7.2.1.4 -</strong> CFR8 Allow SSH
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#pcfr8peekfirewallconfiguration">
                            <strong>Step 7.2.2 -</strong> PCFR8 Peek Firewall Configuration
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#pcfr8setdefaultzone">
                            <strong>Step 7.2.2.1 -</strong> PCFR8 Set Default Zone
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#pcfr8openpeekports">
                            <strong>Step 7.2.2.2 -</strong> PCFR8 Open Peek Ports
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#pcfr8allowpgadmin4">
                            <strong>Step 7.2.2.3 -</strong> PCFR8 Allow PGAdmin4
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#cfr8finishfirewallconfiguration">
                            <strong>Step 7.2.3 -</strong> CFR8 Finish Firewall Configuration
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#cfr8restartfirewall">
                            <strong>Step 7.2.3.1 -</strong> CFR8 Restart Firewall
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#cfr8clearfirewalllogs">
                            <strong>Step 7.2.3.2 -</strong> CFR8 Clear Firewall Logs
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#cfr8printconfiguration">
                            <strong>Step 7.2.3.3 -</strong> CFR8 Print Configuration
                        </a>
                    </h6>



        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8generalprerequisites">
                            <strong>Step 7.3 -</strong> Peek v3 RHEL8 General Prerequisites
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#rhelupdatepackages">
                            <strong>Step 7.3.1 -</strong> RHEL Update Packages
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8gpinstallbuildtools">
                            <strong>Step 7.3.2 -</strong> Peek v3 RHEL8 GP Install Build Tools
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8gpinstallrsyncandcompressionutils">
                            <strong>Step 7.3.3 -</strong> Peek v3 RHEL8 GP Install Rsync and Compression Utils
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8gpinstallpythonbuilddependencies">
                            <strong>Step 7.3.4 -</strong> Peek v3 RHEL8 GP Install Python Build Dependencies
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8gpinstallpostgresqlbuilddependencies">
                            <strong>Step 7.3.5 -</strong> Peek v3 RHEL8 GP Install PostgreSQL Build Dependencies
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8gpinstalllibsforpython">
                            <strong>Step 7.3.6 -</strong> Peek v3 RHEL8 GP Install Libs for Python
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8gpdeploylibsforshapelygeos">
                            <strong>Step 7.3.7 -</strong> Peek v3 RHEL8 GP Deploy Libs for Shapely/GEOS
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8gpinstalllibsforshapelygeos">
                            <strong>Step 7.3.8 -</strong> Peek v3 RHEL8 GP Install Libs for Shapely/GEOS
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8gpdeploylibsforsqlite">
                            <strong>Step 7.3.9 -</strong> Peek v3 RHEL8 GP Deploy Libs for SQLite
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8gpinstalllibsforsqlite">
                            <strong>Step 7.3.10 -</strong> Peek v3 RHEL8 GP Install Libs for SQLite
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8gpinstalllibsoracleclient">
                            <strong>Step 7.3.11 -</strong> Peek v3 RHEL8 GP Install Libs Oracle Client
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#rhelcleanuppackages">
                            <strong>Step 7.3.12 -</strong> RHEL Cleanup Packages
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linsetuppeekuser">
                            <strong>Step 7.4 -</strong> Peek v3 LIN Setup Peek User
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linspucreatepeekuser">
                            <strong>Step 7.4.1 -</strong> Peek v3 LIN SPU Create Peek User
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linspuaddsudocommands">
                            <strong>Step 7.4.2 -</strong> Peek v3 LIN SPU Add Sudo Commands
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linspusymlinkpgdata">
                            <strong>Step 7.4.3 -</strong> Peek v3 LIN SPU Symlink /pgdata
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#rhelspuchownbackup">
                            <strong>Step 7.5 -</strong> RHEL SPU Chown /backup
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8setuppgadmin4">
                            <strong>Step 7.6 -</strong> Peek v3 RHEL8 Setup PGAdmin4
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8pga4deployrpms">
                            <strong>Step 7.6.1 -</strong> Peek v3 RHEL8 PGA4 Deploy RPMs
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8pga4cleanpackages">
                            <strong>Step 7.6.2 -</strong> Peek v3 RHEL8 PGA4 Clean Packages
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8pga4installrpms">
                            <strong>Step 7.6.3 -</strong> Peek v3 RHEL8 PGA4 Install RPMs
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8setuppgadmin4web">
                            <strong>Step 7.6.4 -</strong> Peek v3 RHEL8 Setup pgadmin4-web
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8pga4complete">
                            <strong>Step 7.6.5 -</strong> Peek v3 RHEL8 PGA4 Complete
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8installsrcpythonpostgresql">
                            <strong>Step 7.7 -</strong> Peek v3 RHEL8 Install Src Python + PostgreSQL
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8pypgupdatebashrc">
                            <strong>Step 7.7.1 -</strong> Peek v3 RHEL8 PYPG Update bashrc
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8installpython">
                            <strong>Step 7.7.2 -</strong> Peek v3 RHEL8 Install Python
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8ipydeploypython">
                            <strong>Step 7.7.2.1 -</strong> Peek v3 RHEL8 IPY Deploy Python
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8ipyconfigurebuildinstall">
                            <strong>Step 7.7.2.2 -</strong> Peek v3 RHEL8 IPY Configure Build Install
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8ipycleanup">
                            <strong>Step 7.7.2.3 -</strong> Peek v3 RHEL8 IPY Cleanup
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8ipycreatesymlinks">
                            <strong>Step 7.7.2.4 -</strong> Peek v3 RHEL8 IPY Create Symlinks
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8ipydeploypythonpypis">
                            <strong>Step 7.7.2.5 -</strong> Peek v3 RHEL8 IPY Deploy Python PyPIs
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8ipyinstallpythonpypis">
                            <strong>Step 7.7.2.6 -</strong> Peek v3 RHEL8 IPY Install Python PyPIs
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8installpostgresql">
                            <strong>Step 7.7.3 -</strong> Peek v3 RHEL8 Install PostgreSQL
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8ipgdeploypostgresql">
                            <strong>Step 7.7.3.1 -</strong> Peek v3 RHEL8 IPG Deploy PostgreSQL
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8ipgconfigurebuildinstall">
                            <strong>Step 7.7.3.2 -</strong> Peek v3 RHEL8 IPG Configure Build Install
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8ipginitcluster">
                            <strong>Step 7.7.3.3 -</strong> Peek v3 RHEL8 IPG Init Cluster
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8ipgtunepostgresqlconf">
                            <strong>Step 7.7.3.4 -</strong> Peek v3 RHEL8 IPG Tune postgresql.conf
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8ipginstallservicefile">
                            <strong>Step 7.7.3.5 -</strong> Peek v3 RHEL8 IPG Install Service File
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8installcmake">
                            <strong>Step 7.7.4 -</strong> Peek v3 RHEL8 Install CMake
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8icmdeploycmake">
                            <strong>Step 7.7.4.1 -</strong> Peek v3 RHEL8 ICM Deploy CMake
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8icmconfigurebuildinstall">
                            <strong>Step 7.7.4.2 -</strong> Peek v3 RHEL8 ICM Configure Build Install
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8installtimescaledb">
                            <strong>Step 7.7.5 -</strong> Peek v3 RHEL8 Install TimescaleDB
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8itsdeploytimescaledb">
                            <strong>Step 7.7.5.1 -</strong> Peek v3 RHEL8 ITS Deploy TimescaleDB
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8itsconfigurebuildinstall">
                            <strong>Step 7.7.5.2 -</strong> Peek v3 RHEL8 ITS Configure Build Install
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8itsinstalltstune">
                            <strong>Step 7.7.5.3 -</strong> Peek v3 RHEL8 ITS Install TS Tune
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8itstunedb">
                            <strong>Step 7.7.5.4 -</strong> Peek v3 RHEL8 ITS Tune DB
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8pypgstartpostgresql">
                            <strong>Step 7.7.6 -</strong> Peek v3 RHEL8 PYPG Start PostgreSQL
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lincreatepeekdb">
                            <strong>Step 7.8 -</strong> Peek v3 LIN Create Peek DB
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3pgdbsetsqlpassword">
                            <strong>Step 7.8.1 -</strong> Peek v3 PGDB Set SQL Password
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3pgdbcreatedatabase">
                            <strong>Step 7.8.2 -</strong> Peek v3 PGDB Create database
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3pgdbcleanuppsql">
                            <strong>Step 7.8.3 -</strong> Peek v3 PGDB Cleanup psql
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8installredis">
                            <strong>Step 7.9 -</strong> Peek v3 RHEL8 Install Redis
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8redisdeployredis">
                            <strong>Step 7.9.1 -</strong> Peek v3 RHEL8 REDIS Deploy Redis
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8redisinstallredis">
                            <strong>Step 7.9.2 -</strong> Peek v3 RHEL8 REDIS Install Redis
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8redisenableservice">
                            <strong>Step 7.9.3 -</strong> Peek v3 RHEL8 REDIS Enable Service
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8redisincreaseclientqueuesize">
                            <strong>Step 7.9.4 -</strong> Peek v3 RHEL8 REDIS Increase Client Queue Size
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8installrabbitmq">
                            <strong>Step 7.10 -</strong> Peek v3 RHEL8 Install RabbitMQ
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8rmqdeployrabbitmq">
                            <strong>Step 7.10.1 -</strong> Peek v3 RHEL8 RMQ Deploy RabbitMQ
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8rmqrabbitmqinstall">
                            <strong>Step 7.10.2 -</strong> Peek v3 RHEL8 RMQ RabbitMQ Install
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8rmqrabbitmqsetupsystemd">
                            <strong>Step 7.10.3 -</strong> Peek v3 RHEL8 RMQ RabbitMQ Setup Systemd
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8rmqenablemanagementplugins">
                            <strong>Step 7.10.4 -</strong> Peek v3 RHEL8 RMQ Enable Management Plugins
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8installoracleinstantclient">
                            <strong>Step 7.11 -</strong> Peek v3 RHEL8 Install Oracle Instant Client
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8oclinstalldependencies">
                            <strong>Step 7.11.1 -</strong> Peek v3 RHEL8 OCL Install Dependencies
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8ocldeployoracleinstantclientsdk">
                            <strong>Step 7.11.2 -</strong> Peek v3 RHEL8 OCL Deploy Oracle InstantClient SDK
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8ocldeployoracleinstantclientbasic">
                            <strong>Step 7.11.3 -</strong> Peek v3 RHEL8 OCL Deploy Oracle InstantClient Basic
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8oclsymlinklibs">
                            <strong>Step 7.11.4 -</strong> Peek v3 RHEL8 OCL Symlink Libs
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8oclupdatebashrc">
                            <strong>Step 7.11.5 -</strong> Peek v3 RHEL8 OCL Update bashrc
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8installfreetds">
                            <strong>Step 7.12 -</strong> Peek v3 RHEL8 Install Free TDS
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8iftdsupdatebashrc">
                            <strong>Step 7.12.1 -</strong> Peek v3 RHEL8 IFTDS Update bashrc
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8iftdsdeployfreetds">
                            <strong>Step 7.12.2 -</strong> Peek v3 RHEL8 IFTDS Deploy FreeTDS
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8iftdsinstallfreetds">
                            <strong>Step 7.12.3 -</strong> Peek v3 RHEL8 IFTDS Install FreeTDS
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3rhel8iftdscreatefreetdsconf">
                            <strong>Step 7.12.4 -</strong> Peek v3 RHEL8 IFTDS Create freetds.conf
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linconfigurejsonconfig">
                            <strong>Step 7.13 -</strong> Peek v3 LIN Configure JSON Config
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccdeployskeletonconfig">
                            <strong>Step 7.13.1 -</strong> Peek v3 LIN PCC Deploy Skeleton Config
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccconfigureenabledplugins">
                            <strong>Step 7.13.2 -</strong> Peek v3 LIN PCC Configure Enabled Plugins
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccremovepeekplugindocdb">
                            <strong>Step 7.13.3 -</strong> Peek v3 LIN PCC Remove peek_plugin_docdb
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccconfiguresqlalchemyurl">
                            <strong>Step 7.13.4 -</strong> Peek v3 LIN PCC Configure SQLAlchemy URL
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccconfigurerecoveryadminuser">
                            <strong>Step 7.13.5 -</strong> Peek v3 LIN PCC Configure Recovery Admin User
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccupdatefilesystempaths">
                            <strong>Step 7.13.6 -</strong> Peek v3 LIN PCC Update File System Paths
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccupdatefieldofficeappkeys">
                            <strong>Step 7.13.7 -</strong> Peek v3 LIN PCC Update Field Office App Keys
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccupdatehomepaths">
                            <strong>Step 7.13.8 -</strong> Peek v3 LIN PCC Update Home Paths
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccupdatepofpluginnames">
                            <strong>Step 7.13.9 -</strong> Peek v3 LIN PCC Update PoF Plugin Names
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpcccleanupoldsettings">
                            <strong>Step 7.13.10 -</strong> Peek v3 LIN PCC Cleanup Old Settings
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccenableproductionfrontends">
                            <strong>Step 7.13.11 -</strong> Peek v3 LIN PCC Enable Production Frontends
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccenableproductionlogging">
                            <strong>Step 7.13.12 -</strong> Peek v3 LIN PCC Enable Production Logging
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccenableproductionworker">
                            <strong>Step 7.13.13 -</strong> Peek v3 LIN PCC Enable Production Worker
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#rhelcleanuppackages">
                            <strong>Step 7.14 -</strong> RHEL Cleanup Packages
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#linreboot">
                            <strong>Step 7.15 -</strong> LIN Reboot
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#linrebootwait">
                            <strong>Step 7.16 -</strong> LIN Reboot Wait
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lindeployrelease">
                            <strong>Step 7.17 -</strong> Peek v3 LIN Deploy Release 
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrecleaninstallfiles">
                            <strong>Step 7.17.1 -</strong> Peek v3 LIN PDRE Clean Install Files
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3pullreleasefromnexus">
                            <strong>Step 7.17.2 -</strong> Peek v3 Pull Release from Nexus 
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3extractrelease">
                            <strong>Step 7.17.3 -</strong> Peek v3 Extract Release
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrestoppeek">
                            <strong>Step 7.17.4 -</strong> Peek v3 LIN PDRE Stop Peek
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdredeleteoldreleases">
                            <strong>Step 7.17.5 -</strong> Peek v3 LIN PDRE Delete Old Releases
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdredeleteoldlogs">
                            <strong>Step 7.17.6 -</strong> Peek v3 LIN PDRE Delete Old Logs
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdreinstallrelease">
                            <strong>Step 7.17.7 -</strong> Peek v3 LIN PDRE Install Release
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrecheckpackageversions">
                            <strong>Step 7.17.8 -</strong> Peek v3 LIN PDRE Check Package Versions
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrepatchpeekutilscripts">
                            <strong>Step 7.17.9 -</strong> Peek v3 LIN PDRE Patch Peek Util Scripts
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdreinstallsystemdandrestart">
                            <strong>Step 7.17.10 -</strong> Peek v3 LIN PDRE Install Systemd and Restart
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrecleaninstallfiles">
                            <strong>Step 7.17.11 -</strong> Peek v3 LIN PDRE Clean Install Files
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrelistpackages">
                            <strong>Step 7.17.12 -</strong> Peek v3 LIN PDRE List Packages
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linrestoredataset">
                            <strong>Step 7.18 -</strong> Peek v3 LIN Restore Dataset
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrcleanrestoredir">
                            <strong>Step 7.18.1 -</strong> Peek v3 LIN PDR Clean Restore Dir
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrdeploydataset">
                            <strong>Step 7.18.2 -</strong> Peek v3 LIN PDR Deploy Dataset
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrextractdataset">
                            <strong>Step 7.18.3 -</strong> Peek v3 LIN PDR Extract Dataset
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrrenamedataset">
                            <strong>Step 7.18.4 -</strong> Peek v3 LIN PDR Rename Dataset
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrstoppeek">
                            <strong>Step 7.18.5 -</strong> Peek v3 LIN PDR Stop Peek
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrreloadpeekdb">
                            <strong>Step 7.18.6 -</strong> Peek v3 LIN PDR Reload Peek DB
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrdropplpython3ulanguage">
                            <strong>Step 7.18.7 -</strong> Peek v3 LIN PDR Drop plpython3u Language
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrrestorepeekconfigfiles">
                            <strong>Step 7.18.8 -</strong> Peek v3 LIN PDR Restore Peek Config Files
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linconfigurejsonconfig">
                            <strong>Step 7.18.9 -</strong> Peek v3 LIN Configure JSON Config
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccdeployskeletonconfig">
                            <strong>Step 7.18.9.1 -</strong> Peek v3 LIN PCC Deploy Skeleton Config
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccconfigureenabledplugins">
                            <strong>Step 7.18.9.2 -</strong> Peek v3 LIN PCC Configure Enabled Plugins
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccremovepeekplugindocdb">
                            <strong>Step 7.18.9.3 -</strong> Peek v3 LIN PCC Remove peek_plugin_docdb
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccconfiguresqlalchemyurl">
                            <strong>Step 7.18.9.4 -</strong> Peek v3 LIN PCC Configure SQLAlchemy URL
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccconfigurerecoveryadminuser">
                            <strong>Step 7.18.9.5 -</strong> Peek v3 LIN PCC Configure Recovery Admin User
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccupdatefilesystempaths">
                            <strong>Step 7.18.9.6 -</strong> Peek v3 LIN PCC Update File System Paths
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccupdatefieldofficeappkeys">
                            <strong>Step 7.18.9.7 -</strong> Peek v3 LIN PCC Update Field Office App Keys
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccupdatehomepaths">
                            <strong>Step 7.18.9.8 -</strong> Peek v3 LIN PCC Update Home Paths
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccupdatepofpluginnames">
                            <strong>Step 7.18.9.9 -</strong> Peek v3 LIN PCC Update PoF Plugin Names
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpcccleanupoldsettings">
                            <strong>Step 7.18.9.10 -</strong> Peek v3 LIN PCC Cleanup Old Settings
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccenableproductionfrontends">
                            <strong>Step 7.18.9.11 -</strong> Peek v3 LIN PCC Enable Production Frontends
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccenableproductionlogging">
                            <strong>Step 7.18.9.12 -</strong> Peek v3 LIN PCC Enable Production Logging
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpccenableproductionworker">
                            <strong>Step 7.18.9.13 -</strong> Peek v3 LIN PCC Enable Production Worker
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrunlockwebappbuild">
                            <strong>Step 7.18.10 -</strong> Peek v3 LIN PDR Unlock WebApp Build
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrdroppeekstorageservicefixbuginpeek">
                            <strong>Step 7.18.11 -</strong> Peek v3 LIN PDR Drop Peek Storage Service (FIX BUG IN PEEK)
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrupgradetimescaledb">
                            <strong>Step 7.18.12 -</strong> Peek v3 LIN PDR Upgrade TimescaleDB
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrmigratedatabase">
                            <strong>Step 7.18.13 -</strong> Peek v3 LIN PDR Migrate Database
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrupdateappservers">
                            <strong>Step 7.18.14 -</strong> Peek v3 LIN PDR Update App Servers
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrupdategistilespath">
                            <strong>Step 7.18.15 -</strong> Peek v3 LIN PDR Update GIS Tiles Path
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3purgerabbitmq">
                            <strong>Step 7.18.16 -</strong> Peek v3 Purge RabbitMQ
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdredeleteoldlogs">
                            <strong>Step 7.18.17 -</strong> Peek v3 LIN PDRE Delete Old Logs
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrcleanrestoredir">
                            <strong>Step 7.18.18 -</strong> Peek v3 LIN PDR Clean Restore Dir
                        </a>
                    </h6>



        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lindeploygistilesnzte">
                            <strong>Step 8 -</strong> Peek v3 LIN Deploy GIS Tiles (NZTE)
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lincleanupgistilesarchive">
                            <strong>Step 8.1 -</strong> Peek v3 LIN Cleanup GIS Tiles Archive
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lindeploygistilesarchive">
                            <strong>Step 8.2 -</strong> Peek v3 LIN Deploy GIS Tiles Archive
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lininstallgistilesarchive">
                            <strong>Step 8.3 -</strong> Peek v3 LIN Install GIS Tiles Archive
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lincleanupgistilesarchive">
                            <strong>Step 8.4 -</strong> Peek v3 LIN Cleanup GIS Tiles Archive
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdredeleteoldlogs">
                            <strong>Step 9 -</strong> Peek v3 LIN PDRE Delete Old Logs
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3linpdrstartpeek">
                            <strong>Step 10 -</strong> Peek v3 LIN PDR Start Peek
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lintestpeekdeployment">
                            <strong>Step 11 -</strong> Peek v3 LIN Test Peek Deployment
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lintpdtestpeeklogic">
                            <strong>Step 11.1 -</strong> Peek v3 LIN TPD Test Peek Logic
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lintpdlogicteststart">
                            <strong>Step 11.1.1 -</strong> Peek v3 LIN TPD LOGIC Test Start
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lintpdtestpeekagent">
                            <strong>Step 11.2 -</strong> Peek v3 LIN TPD Test Peek Agent
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lintpdagentteststart">
                            <strong>Step 11.2.1 -</strong> Peek v3 LIN TPD AGENT Test Start
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lintpdtestpeekworker">
                            <strong>Step 11.3 -</strong> Peek v3 LIN TPD Test Peek Worker
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lintpdworkerteststart">
                            <strong>Step 11.3.1 -</strong> Peek v3 LIN TPD WORKER Test Start
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lintpdtestpeekfield">
                            <strong>Step 11.4 -</strong> Peek v3 LIN TPD Test Peek Field
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lintpdfieldteststart">
                            <strong>Step 11.4.1 -</strong> Peek v3 LIN TPD FIELD Test Start
                        </a>
                    </h6>


        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lintpdtestpeekoffice">
                            <strong>Step 11.5 -</strong> Peek v3 LIN TPD Test Peek Office
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#peekv3lintpdofficeteststart">
                            <strong>Step 11.5.1 -</strong> Peek v3 LIN TPD OFFICE Test Start
                        </a>
                    </h6>




                </div>
            </div>

<!-- Blueprint Contents -->
            <div class="col-lg-8 pt-3">
                <div class="container">


        <div class="blueprint-description jumbotron">
            <h2 class="display-3 text-center">
                Automate This
            </h2>
            <p class="lead text-center">
                Use the <strong>Attune GUI</strong> for your Scripts
            </p>
            <p class="lead">
                <ol>
                    <a href="https://www.servertribe.com/download-attune-registration/"
                        target="_blank">
                        <span class="badge badge-primary">1</span>
                        Download Attune
                        <i class="fa-solid fa-download fa-beat-fade" style="color: #0197ff;"></i>
                    </a>
                </ol>
                <ol>
                    <a href="https://github.com/attune-Automation/"
                        target="_blank">
                        <span class="badge badge-primary">2</span>
                         Copy the Attune Project URL
                         <i class="fa-brands fa-github fa-fade"></i>
                    </a>
                </ol>
                <ol>
                    <a href="https://servertribe-attune.readthedocs.io/en/latest/howto/design_workspace/clone_project.html"
                        target="_blank">
                        <span class="badge badge-primary">3</span>
                        Clone the Project in Attune
                         <i class="fa-solid fa-book fa-fade" style="color: #0197ff;"></i>
                    </a>
                </ol>
                <ol>
                    <a href="https://www.youtube.com/watch?v=GCWDI29rDV0"
                        target="_blank">
                        <span class="badge badge-primary">4</span>
                        Plan your Job(s)
                        <i class="fa-brands fa-youtube fa-fade" style="color: #0197ff;"></i>
                    </a>
                </ol>
                <ol>
                    <a href="https://www.youtube.com/watch?v=b7DhFcURkZg"
                        target="_blank">
                        <span class="badge badge-primary">5</span>
                        Run your Job(s)
                        <i class="fa-brands fa-youtube fa-fade" style="color: #0197ff;"></i>
                    </a>
                </ol>
            </p>
            <p class="lead text-center">
                You've automated: <strong>Build Peek v3 on RHEL8+Hyper-V</strong>
            </p>
            <hr class="my-4 text-center">
            <div class="col px-0">
                <p class="text-center">
                    Get the most out of automation with our get started
                    videos, product demonstrations, and more.
                </p>
                <p class="lead text-center">
                    <a class="btn btn-primary btn-lg"
                       href="https://www.servertribe.com/learn/"
                       target="_blank"
                       role="button">
                        Learn Attune Automation
                    </a>
                </p>
            </div>
        </div>

        <div class="row">
            <p>The following steps will guide you through the manual process.</p>
        </div>

<!-- Blueprint Steps -->


        



                    <div class="row pt-5">
                        <h4 id="rhel8connecttorpmserverlink">
                            <a href="#rhel8connecttorpmserverlink">
                                <strong>Step 1 -</strong> RHEL8 Connect to RPM Server (link)
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>






    





        



                    <div class="row pt-5">
                        <h4 id="rhel8hypervaddvirtualdisksforpeeklink">
                            <a href="#rhel8hypervaddvirtualdisksforpeeklink">
                                <strong>Step 2 -</strong> RHEL8 HyperV Add Virtual Disks for Peek (Link)
                            </a>
                        </h4>
                    </div>







    





        



                    <div class="row pt-5">
                        <h4 id="linreboot">
                            <a href="#linreboot">
                                <strong>Step 3 -</strong> LIN Reboot
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxrootuser}@{targetserverlin}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
nohup shutdown -r now &amp;
                </code>
            </pre>
        </div>
    </div>





        



                    <div class="row pt-5">
                        <h4 id="linrebootwait">
                            <a href="#linrebootwait">
                                <strong>Step 4 -</strong> LIN Reboot Wait
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>












    

    <div class="row">
        <p class="mb-0">
            Check if TCP Port <strong>0</strong> is listening.
            Make sure the TCP Port goes down for
            <strong>3</strong> seconds.
            When the TCP Port is up, wait <strong>10</strong>
            seconds.
        </p>
        <p>Use Telnet to check if the TCP Service is accepting connections.</p>
    </div>





        



                    <div class="row pt-5">
                        <h3 id="peekv3linsetuplvm">
                            <a href="#peekv3linsetuplvm">
                                <strong>Step 5 -</strong> Peek v3 LIN Setup LVM
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3linsetupvgs">
                            <a href="#peekv3linsetupvgs">
                                <strong>Step 5.1 -</strong> Peek v3 LIN Setup VGs
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxrootuser}@{targetserverlin}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
mkvg() {
    VG=$1
    DEV=$2
    
    parted -s /dev/$DEV mktable gpt
    parted -s /dev/$DEV mkpart primary xfs 1m 100%
    
    vgextend $VG /dev/${DEV}1
}

mkvg rootvg {ksLinuxDiskFirstLetter}db
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linsetuphomelvs">
                            <a href="#peekv3linsetuphomelvs">
                                <strong>Step 5.2 -</strong> Peek v3 LIN Setup Home LVs
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
lvextend --size 25g --resizefs /dev/rootvg/home
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linsetupbackuplv">
                            <a href="#peekv3linsetupbackuplv">
                                <strong>Step 5.3 -</strong> Peek v3 LIN Setup Backup LV
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
mklv() {
    DIR=$1
    NAME=$2
    SIZE=$3
    VG=$4
    
    mkdir -p $DIR
    lvcreate --size $SIZE --name $NAME $VG 
    mkfs.xfs /dev/mapper/$VG-$NAME
    
    cat &gt;&gt; /etc/fstab &lt;&lt;EOF
/dev/mapper/$VG-$NAME    $DIR                    xfs     defaults        0 0
EOF
    mount -a
}

mklv /backup backup 50g rootvg
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linsetupdblvs">
                            <a href="#peekv3linsetupdblvs">
                                <strong>Step 5.4 -</strong> Peek v3 LIN Setup DB LVs
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
mklv() {
    DIR=$1
    NAME=$2
    SIZE=$3
    VG=$4
    
    mkdir -p $DIR
    lvcreate --size $SIZE --name $NAME $VG 
    mkfs.xfs /dev/mapper/$VG-$NAME
    
    cat &gt;&gt; /etc/fstab &lt;&lt;EOF
/dev/mapper/$VG-$NAME    $DIR                    xfs     defaults        0 0
EOF
    mount -a
}

mklv /pgdata pgdata 30g rootvg
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="bpapssdtsdsetupvar">
                            <a href="#bpapssdtsdsetupvar">
                                <strong>Step 5.5 -</strong> BPAPS SDTSD Setup /var
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
VAR_VOLUME_MG=$(df -hm | grep rootvg-var | awk &#x27;{print $2}&#x27;)
echo &quot;VAR_VOLUME_MG = ${VAR_VOLUME_MG}&quot;
echo &quot;varLvmVolumeSize = {varLvmVolumeSize}&quot;

if [ {varLvmVolumeSize} -gt ${VAR_VOLUME_MG} ]
then
    lvextend -v -L{varLvmVolumeSize}m -r /dev/rootvg/var
else
    echo &quot;/dev/rootvg/var is already at {varLvmVolumeSize} MB&quot;
fi
                </code>
            </pre>
        </div>
    </div>






        



                    <div class="row pt-5">
                        <h4 id="bpvorhrhelenablepowertoolsrepo">
                            <a href="#bpvorhrhelenablepowertoolsrepo">
                                <strong>Step 6 -</strong> BPVORH RHEL Enable Power Tools Repo
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
if hostnamectl \
    | grep &quot;Operating System&quot; \
    | grep -qi &quot;centos&quot;
then
    echo &quot;This is CentOS&quot;
        
    dnf -y install dnf-plugins-core
    dnf upgrade -y
    dnf -y install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm
    dnf config-manager --set-enabled powertools
else
    echo &quot;This is not CentOS, skipping.&quot;
fi
                </code>
            </pre>
        </div>
    </div>





        



                    <div class="row pt-5">
                        <h3 id="buildpeekv3serverrhel8">
                            <a href="#buildpeekv3serverrhel8">
                                <strong>Step 7 -</strong> Build Peek v3 Server RHEL8
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            <p>https://synerty-peek.readthedocs.io/en/latest/setup_os_requirements/setup_os_requirements_rhel/SetupOSRequirementsRhel.html#setup-os-requirements-rhel</p>
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h3 id="rhel8setupos">
                            <a href="#rhel8setupos">
                                <strong>Step 7.1 -</strong> RHEL8 Setup OS
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            <p>Install the common server requirements for GE ADMS on RHEL8.
This applies to DB, JBOSS (DPF and TSDS), RPM, Attune, Peek, and Application servers.</p>
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h3 id="rhel8sosconfigureos">
                            <a href="#rhel8sosconfigureos">
                                <strong>Step 7.1.1 -</strong> RHEL8 SOS Configure OS
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="rhel8crpmdeployosconfigfiles">
                            <a href="#rhel8crpmdeployosconfigfiles">
                                <strong>Step 7.1.1.1 -</strong> RHEL8 CRPM Deploy OS Config Files
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            
        </p>
        <p>
            Copy the File(s)
            <strong>RHEL8_etc_Config_NEW.tar</strong>
            to the target node.
        </p>
        <p>
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/etc
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8cosfixosconfigpermissions">
                            <a href="#ponr8cosfixosconfigpermissions">
                                <strong>Step 7.1.1.2 -</strong> PONR8 COS Fix OS Config Permissions
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
chmod -v ugo+r /etc/profile.d/environment_prompt.sh

chmod -v ugo+r /etc/hosts
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponrhel8sethostname">
                            <a href="#ponrhel8sethostname">
                                <strong>Step 7.1.1.3 -</strong> PON RHEL8 Set Hostname
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
echo &quot;{targetServer.hostname}&quot; &gt; /etc/hostname

hostname &quot;{targetServer.hostname}&quot;
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponrhel8disableipv6">
                            <a href="#ponrhel8disableipv6">
                                <strong>Step 7.1.1.4 -</strong> PON RHEL8 Disable IPv6
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
F=&quot;/etc/sysctl.conf&quot;

if grep -q &#x27;net.ipv6&#x27; ${F}; then
    echo &quot;IPv6 is already disabled&quot;
else
    echo &quot;Disabling IPv6&quot;
    echo &quot;&quot; &gt;&gt; $F
    echo &quot;# Disable IPv6&quot; &gt;&gt; $F
    echo &quot;net.ipv6.conf.all.disable_ipv6 = 1&quot; &gt;&gt; $F
    echo &quot;net.ipv6.conf.default.disable_ipv6 = 1&quot; &gt;&gt; $F
    sysctl -p
fi

sed -i &#x27;/::1/d&#x27; /etc/hosts
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8cosupdatednsservers">
                            <a href="#ponr8cosupdatednsservers">
                                <strong>Step 7.1.1.5 -</strong> PONR8 COS Update DNS Servers
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
IFACE=$(nmcli dev status | grep ethernet | cut -f1 -d&#x27; &#x27;)

set -x
nmcli con mod ${IFACE} ipv4.dns &quot;{targetSubnet.dns1} {targetSubnet.dns2}&quot;
nmcli con mod ${IFACE} ipv4.dns-search {targetServerLin.domain}
nmcli con up ${IFACE}
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8cossetuploginbanner">
                            <a href="#ponr8cossetuploginbanner">
                                <strong>Step 7.1.1.6 -</strong> PONR8 COS Setup Login Banner
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
chmod 644 /etc/login_banner

sed -i &#x27;s,#Banner.*,Banner /etc/login_banner,g&#x27; /etc/ssh/sshd_config

systemctl restart sshd
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="rhel8sosinstallutilities">
                            <a href="#rhel8sosinstallutilities">
                                <strong>Step 7.1.2 -</strong> RHEL8 SOS Install Utilities
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            <p>Install package updates and common dependencies for GE ADMS DPF, TSDS, Database, Application or Report servers.</p>
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstallnettools">
                            <a href="#ponr8puinstallnettools">
                                <strong>Step 7.1.2.1 -</strong> PONR8 PU Install Net-Tools
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum install -y net-tools
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstallgit">
                            <a href="#ponr8puinstallgit">
                                <strong>Step 7.1.2.2 -</strong> PONR8 PU Install Git
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum install -y git
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstallrsyslog">
                            <a href="#ponr8puinstallrsyslog">
                                <strong>Step 7.1.2.3 -</strong> PONR8 PU Install rsyslog
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            <p>rsyslog is not installed by default on RHEL8.</p>
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum install -y rsyslog
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstallperl">
                            <a href="#ponr8puinstallperl">
                                <strong>Step 7.1.2.4 -</strong> PONR8 PU Install Perl
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
# perl is not installed by default on RHEL8
yum install -y perl
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstalljq">
                            <a href="#ponr8puinstalljq">
                                <strong>Step 7.1.2.5 -</strong> PONR8 PU Install JQ
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum install -y jq
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstallbzip2">
                            <a href="#ponr8puinstallbzip2">
                                <strong>Step 7.1.2.6 -</strong> PONR8 PU Install Bzip2
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum install -y bzip2
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstallunzip">
                            <a href="#ponr8puinstallunzip">
                                <strong>Step 7.1.2.7 -</strong> PONR8 PU Install Unzip
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum install -y unzip
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstallrsync">
                            <a href="#ponr8puinstallrsync">
                                <strong>Step 7.1.2.8 -</strong> PONR8 PU Install Rsync
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum install -y rsync
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstalltelnet">
                            <a href="#ponr8puinstalltelnet">
                                <strong>Step 7.1.2.9 -</strong> PONR8 PU Install Telnet
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum install -y telnet
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstallwireshark">
                            <a href="#ponr8puinstallwireshark">
                                <strong>Step 7.1.2.10 -</strong> PONR8 PU Install Wireshark
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum install -y wireshark
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstallnano">
                            <a href="#ponr8puinstallnano">
                                <strong>Step 7.1.2.11 -</strong> PONR8 PU Install Nano
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum install -y nano
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8pudeploynmon">
                            <a href="#ponr8pudeploynmon">
                                <strong>Step 7.1.2.12 -</strong> PONR8 PU Deploy nmon
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            <p>These RPMs were gathered with a CentOS7 VM.</p>
<p>sudo yum install epel-release</p>
<p>mkdir pkg_nmon &amp;&amp; cd pkg_nmon
yum install --downloadonly --downloaddir=. nmon
cd ..
tar cf pkg_nmon.tar pkg_nmon
rm -rf pkg_nmon</p>
        </p>
        <p>
            Copy the File(s)
            <strong>RHEL8_EPEL_nmon.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
{targetServerInstallerTmpPath}, relative to the home directory
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstallnmon">
                            <a href="#ponr8puinstallnmon">
                                <strong>Step 7.1.2.13 -</strong> PONR8 PU Install nmon
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
D={targetServerInstallerTmpPath}/pkg_nmon

yum install -y $D/nmon*rpm

rm -rf $D
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8pudeployiftop">
                            <a href="#ponr8pudeployiftop">
                                <strong>Step 7.1.2.14 -</strong> PONR8 PU Deploy iftop
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            <p>These RPMs were gathered with a CentOS7 VM.</p>
<p>sudo yum install epel-release</p>
<p>mkdir pkg_iftop &amp;&amp; cd pkg_iftop
yum install --downloadonly --downloaddir=. iftop
cd ..
tar cf pkg_iftop.tar pkg_iftop
rm -rf pkg_iftop</p>
        </p>
        <p>
            Copy the File(s)
            <strong>RHEL8_EPEL_iftop.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
{targetServerInstallerTmpPath}, relative to the home directory
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstalliftop">
                            <a href="#ponr8puinstalliftop">
                                <strong>Step 7.1.2.15 -</strong> PONR8 PU Install iftop
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
D={targetServerInstallerTmpPath}/pkg_iftop

yum install -y $D/iftop*rpm

rm -rf $D
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8pudeployp7zip">
                            <a href="#ponr8pudeployp7zip">
                                <strong>Step 7.1.2.16 -</strong> PONR8 PU Deploy p7zip
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            <p>These RPMs were gathered with a CentOS7 VM.</p>
<p>sudo yum install epel-release</p>
<p>mkdir pkg_p7zip &amp;&amp; cd pkg_p7zip
yum install --downloadonly --downloaddir=. p7zip p7zip-plugins
cd ..
tar cf pkg_p7zip.tar pkg_p7zip
rm -rf pkg_p7zip</p>
        </p>
        <p>
            Copy the File(s)
            <strong>RHEL8_EPEL_p7ip.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
{targetServerInstallerTmpPath}, relative to the home directory
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstallp7zip">
                            <a href="#ponr8puinstallp7zip">
                                <strong>Step 7.1.2.17 -</strong> PONR8 PU Install p7zip
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
D={targetServerInstallerTmpPath}/pkg_p7zip

yum install -y $D/p7zip*rpm

rm -rf $D
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstallftp">
                            <a href="#ponr8puinstallftp">
                                <strong>Step 7.1.2.18 -</strong> PONR8 PU Install FTP
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum install ftp -y
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstallselinuxpolicycoreutils">
                            <a href="#ponr8puinstallselinuxpolicycoreutils">
                                <strong>Step 7.1.2.19 -</strong> PONR8 PU Install SELinux PolicyCoreUtils
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum install -y $(cat &lt;&lt;EOF
    policycoreutils
    policycoreutils-devel
    policycoreutils-python-utils
EOF
)
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8puinstallcifsutils">
                            <a href="#ponr8puinstallcifsutils">
                                <strong>Step 7.1.2.20 -</strong> PONR8 PU Install CIFS Utils
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum install -y cifs-utils
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="rhel8sossetupchronyntp">
                            <a href="#rhel8sossetupchronyntp">
                                <strong>Step 7.1.3 -</strong> RHEL8 SOS Setup Chrony NTP
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            <p>Chrony is the service used to keep all the servers time sync'd</p>
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="ponr8chronydeployconfig">
                            <a href="#ponr8chronydeployconfig">
                                <strong>Step 7.1.3.1 -</strong> PONR8 Chrony Deploy Config
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            
        </p>
        <p>
            Copy the File(s)
            <strong>Linux_chronyconf.tar</strong>
            to the target node.
        </p>
        <p>
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/etc
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8chronyntpenableandrestartservice">
                            <a href="#ponr8chronyntpenableandrestartservice">
                                <strong>Step 7.1.3.2 -</strong> PONR8 Chrony NTP Enable and Restart Service
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
# Enable auto starting of NTP
systemctl enable chronyd

# Restart the NTP service
systemctl restart chronyd

# Print the status
systemctl status chronyd
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8chronysetrealtimeclockutc">
                            <a href="#ponr8chronysetrealtimeclockutc">
                                <strong>Step 7.1.3.3 -</strong> PONR8 Chrony Set Real Time Clock UTC
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
timedatectl set-local-rtc 0
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="ponr8chronyntpteststatus">
                            <a href="#ponr8chronyntpteststatus">
                                <strong>Step 7.1.3.4 -</strong> PONR8 Chrony NTP Test Status
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
# Wait until chrony has got a measurement from each source
COUNT=1
while chronyc -c sources | awk -F, &#x27;{print $8}&#x27; | grep -q &quot;0.000000000&quot;
do
    if [[ ${COUNT} -le 12 ]]
    then
        echo &quot;Waiting until chrony has got a measurement from each source...&quot;
        sleep 5
    else
        echo &quot;chrony did not connect to the NTP server.&quot; 1&gt;&amp;2
        exit $((LINENO-1))
    fi
    ((COUNT++))
done

# Check chrony has set the clock within acceptable limits
LIMIT=0.5 # seconds
SOURCES=$(chronyc -c sources)
SOURCES=${SOURCES//-/} # make any negative numbers positive
for OFFSET in $(awk -F, &#x27;{print $8}&#x27; &lt;&lt;&lt; &quot;${SOURCES}&quot;)
do
    if [ &quot;${OFFSET}&quot; == &quot;0.000000000&quot; ]
    then
        # It&#x27;s impossible for the time to be this closely synced, therefore 
        # chronyd has been unable to connect to the NTP server.
        echo &quot;chrony is unable to connect to the NTP server.&quot; 1&gt;&amp;2
        exit $((LINENO-1))
    fi
    
    echo &quot;Offset is ${OFFSET} seconds.&quot;
    if (( $(echo &quot;${OFFSET} &gt; ${LIMIT}&quot; | bc -l) ))
    then
        echo &quot;Offset is greater than ${LIMIT} seconds.&quot; 1&gt;&amp;2
        exit $((LINENO-1))
    fi
done
                </code>
            </pre>
        </div>
    </div>







    



                    <div class="row pt-5">
                        <h3 id="peekconfigurefirewallrhel8">
                            <a href="#peekconfigurefirewallrhel8">
                                <strong>Step 7.2 -</strong> Peek Configure Firewall RHEL8
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h3 id="cfr8commonfirewallconfiguration">
                            <a href="#cfr8commonfirewallconfiguration">
                                <strong>Step 7.2.1 -</strong> CFR8 Common Firewall Configuration
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="cfr8enabledeniedconnectionlogging">
                            <a href="#cfr8enabledeniedconnectionlogging">
                                <strong>Step 7.2.1.1 -</strong> CFR8 Enable Denied Connection Logging
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
set -x 

# By Default we want to log our denied connections
# This alters /etc/firewalld/firewalld.conf
firewall-cmd --set-log-denied=all
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="cfr8createfirewalllogfile">
                            <a href="#cfr8createfirewalllogfile">
                                <strong>Step 7.2.1.2 -</strong> CFR8 Create Firewall Log File
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            <p>Watch the files with:
 tail -f /var/log/firewalld-droppd.log | grep DPT</p>
<p>Clear the file with:
echo &gt;  /var/log/firewalld-droppd.log</p>
<p>(The grep just highlights the part with the port that is being pinged)</p>
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
# Make settings for the config file
CONFIG=&#x27;:msg,contains,&quot;_DROP&quot; /var/log/firewalld-droppd.log
:msg,contains,&quot;_REJECT&quot; /var/log/firewalld-droppd.log
 &amp; stop&#x27;
 
# Save the config file
echo &quot;$CONFIG&quot; | tee /etc/rsyslog.d/firewalld-droppd.conf

# Restart the service to apply changes
systemctl restart rsyslog
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="cfr8clearfirewallconfig">
                            <a href="#cfr8clearfirewallconfig">
                                <strong>Step 7.2.1.3 -</strong> CFR8 Clear Firewall Config
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
# Clear old firewall Rules
rm -fv /etc/firewalld/zones/*.xml
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="cfr8allowssh">
                            <a href="#cfr8allowssh">
                                <strong>Step 7.2.1.4 -</strong> CFR8 Allow SSH
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
set -x

# Open port 22 for ssh to continue working
# firewall-cmd --add-port=22/tcp --permanent
firewall-cmd --permanent --add-service=ssh

# Enable the changes before moving on
firewall-cmd --reload
systemctl restart firewalld.service
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="pcfr8peekfirewallconfiguration">
                            <a href="#pcfr8peekfirewallconfiguration">
                                <strong>Step 7.2.2 -</strong> PCFR8 Peek Firewall Configuration
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="pcfr8setdefaultzone">
                            <a href="#pcfr8setdefaultzone">
                                <strong>Step 7.2.2.1 -</strong> PCFR8 Set Default Zone
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
set -x
firewall-cmd --set-default=public
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="pcfr8openpeekports">
                            <a href="#pcfr8openpeekports">
                                <strong>Step 7.2.2.2 -</strong> PCFR8 Open Peek Ports
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
ZONE=public

for PORT in $(sed &#x27;s/[[:space:]]*#.*// ; /^[[:space:]]*$/d&#x27; &lt;&lt;EOF
    8000    # Peek Mobile
    8002    # Peek Office
    8010    # Peek Admin
    8012    # Peek Agent
    8256    # used by Interface Queue Monitor on the app servers
EOF
)
do
    echo &quot;Opening TCP port ${PORT} for zone ${ZONE}&quot;
    firewall-cmd --permanent --zone=${ZONE} --add-port=${PORT}/tcp
done
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="pcfr8allowpgadmin4">
                            <a href="#pcfr8allowpgadmin4">
                                <strong>Step 7.2.2.3 -</strong> PCFR8 Allow PGAdmin4
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
set -x
firewall-cmd --permanent --add-service=http
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="cfr8finishfirewallconfiguration">
                            <a href="#cfr8finishfirewallconfiguration">
                                <strong>Step 7.2.3 -</strong> CFR8 Finish Firewall Configuration
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="cfr8restartfirewall">
                            <a href="#cfr8restartfirewall">
                                <strong>Step 7.2.3.1 -</strong> CFR8 Restart Firewall
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
systemctl restart firewalld.service
systemctl status firewalld.service
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="cfr8clearfirewalllogs">
                            <a href="#cfr8clearfirewalllogs">
                                <strong>Step 7.2.3.2 -</strong> CFR8 Clear Firewall Logs
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
# We don&#x27;t want firewall logs from before setup was complete.
echo &gt; /var/log/firewalld-droppd.log
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="cfr8printconfiguration">
                            <a href="#cfr8printconfiguration">
                                <strong>Step 7.2.3.3 -</strong> CFR8 Print Configuration
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
firewall-cmd --list-all-zones
                </code>
            </pre>
        </div>
    </div>







    



                    <div class="row pt-5">
                        <h3 id="peekv3rhel8generalprerequisites">
                            <a href="#peekv3rhel8generalprerequisites">
                                <strong>Step 7.3 -</strong> Peek v3 RHEL8 General Prerequisites
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="rhelupdatepackages">
                            <a href="#rhelupdatepackages">
                                <strong>Step 7.3.1 -</strong> RHEL Update Packages
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxrootuser}@{peekserver}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum update -y
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8gpinstallbuildtools">
                            <a href="#peekv3rhel8gpinstallbuildtools">
                                <strong>Step 7.3.2 -</strong> Peek v3 RHEL8 GP Install Build Tools
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
PKG=&quot;gcc gcc-c++ kernel-devel make&quot;
yum install -y $PKG
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8gpinstallrsyncandcompressionutils">
                            <a href="#peekv3rhel8gpinstallrsyncandcompressionutils">
                                <strong>Step 7.3.3 -</strong> Peek v3 RHEL8 GP Install Rsync and Compression Utils
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
PKG=&quot;rsync&quot;
PKG=&quot;$PKG unzip&quot;
PKG=&quot;$PKG wget&quot;
PKG=&quot;$PKG bzip2&quot;

yum install -y $PKG
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8gpinstallpythonbuilddependencies">
                            <a href="#peekv3rhel8gpinstallpythonbuilddependencies">
                                <strong>Step 7.3.4 -</strong> Peek v3 RHEL8 GP Install Python Build Dependencies
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
PKG=&quot;curl git m4 ruby texinfo bzip2-devel libcurl-devel&quot;
PKG=&quot;$PKG expat-devel ncurses-libs zlib-devel gmp-devel&quot;
PKG=&quot;$PKG openssl openssl-devel&quot;
yum install -y $PKG
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8gpinstallpostgresqlbuilddependencies">
                            <a href="#peekv3rhel8gpinstallpostgresqlbuilddependencies">
                                <strong>Step 7.3.5 -</strong> Peek v3 RHEL8 GP Install PostgreSQL Build Dependencies
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum install -y readline-devel
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8gpinstalllibsforpython">
                            <a href="#peekv3rhel8gpinstalllibsforpython">
                                <strong>Step 7.3.6 -</strong> Peek v3 RHEL8 GP Install Libs for Python
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
# For the cryptography package
PKG=&quot;libffi-devel&quot;

PKG=&quot;$PKG openldap-devel&quot;

yum install -y $PKG
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8gpdeploylibsforshapelygeos">
                            <a href="#peekv3rhel8gpdeploylibsforshapelygeos">
                                <strong>Step 7.3.7 -</strong> Peek v3 RHEL8 GP Deploy Libs for Shapely/GEOS
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            
        </p>
        <p>
            Copy the File(s)
            <strong>Peek_v3_Offline_GEOS_RPMs.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/tmp/offline_install/geos
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8gpinstalllibsforshapelygeos">
                            <a href="#peekv3rhel8gpinstalllibsforshapelygeos">
                                <strong>Step 7.3.8 -</strong> Peek v3 RHEL8 GP Install Libs for Shapely/GEOS
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd /tmp/offline_install/geos

yum install -y *.rpm
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8gpdeploylibsforsqlite">
                            <a href="#peekv3rhel8gpdeploylibsforsqlite">
                                <strong>Step 7.3.9 -</strong> Peek v3 RHEL8 GP Deploy Libs for SQLite
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            
        </p>
        <p>
            Copy the File(s)
            <strong>Peek_v3_Offline_SQLite_RPMs.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/tmp/offline_install/sqlite
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8gpinstalllibsforsqlite">
                            <a href="#peekv3rhel8gpinstalllibsforsqlite">
                                <strong>Step 7.3.10 -</strong> Peek v3 RHEL8 GP Install Libs for SQLite
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            <p>These packages are not from the Redhat Network.</p>
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd /tmp/offline_install/sqlite

yum install -y *.rpm
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8gpinstalllibsoracleclient">
                            <a href="#peekv3rhel8gpinstalllibsoracleclient">
                                <strong>Step 7.3.11 -</strong> Peek v3 RHEL8 GP Install Libs Oracle Client
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
# For LXML and the Oracle client
PKG=&quot;libxml2 libxml2-devel&quot;
PKG=&quot;$PKG libxslt libxslt-devel&quot;
PKG=&quot;$PKG libaio libaio-devel&quot;

sudo yum install -y $PKG
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="rhelcleanuppackages">
                            <a href="#rhelcleanuppackages">
                                <strong>Step 7.3.12 -</strong> RHEL Cleanup Packages
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxrootuser}@{targetserverlin}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum clean all
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="peekv3linsetuppeekuser">
                            <a href="#peekv3linsetuppeekuser">
                                <strong>Step 7.4 -</strong> Peek v3 LIN Setup Peek User
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3linspucreatepeekuser">
                            <a href="#peekv3linspucreatepeekuser">
                                <strong>Step 7.4.1 -</strong> Peek v3 LIN SPU Create Peek User
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxrootuser}@{peekserver}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
echo &quot;Create the peek user if it doesn&#x27;t exist&quot;
if grep -q peek /etc/passwd
then
    echo &quot;Peek user already exists&quot;
else
    useradd -m peek
fi

passwd peek
                </code>
            </pre>
        </div>
    </div>

    <div class="row">
        <p>
            This script may require you to answer the following prompts:
        </p>
    </div>
    <div class="row">
        <table>
            <thead>
                <tr>
                    <th>
                        Prompt
                    </th>
                    <th class="prompts">
                        Answer
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        password:
                    </td>
                    <td class="prompts">
                        <code class="language-sql">
{linuxPeekUser.password}
                        </code>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>




    



                    <div class="row pt-5">
                        <h4 id="peekv3linspuaddsudocommands">
                            <a href="#peekv3linspuaddsudocommands">
                                <strong>Step 7.4.2 -</strong> Peek v3 LIN SPU Add Sudo Commands
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
echo &quot;Setting up peek sudo support&quot;

cat &lt;&lt;EOF &gt; /etc/sudoers.d/peek
peek        ALL=(ALL)       NOPASSWD: /usr/bin/yum, /usr/bin/systemctl, /usr/bin/cp, /usr/bin/chmod, /usr/bin/chown, /usr/bin/sed
EOF
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linspusymlinkpgdata">
                            <a href="#peekv3linspusymlinkpgdata">
                                <strong>Step 7.4.3 -</strong> Peek v3 LIN SPU Symlink /pgdata
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
chown -R peek:peek /pgdata

cd ~peek
ln -snvf /pgdata .
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h4 id="rhelspuchownbackup">
                            <a href="#rhelspuchownbackup">
                                <strong>Step 7.5 -</strong> RHEL SPU Chown /backup
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
chown -R peek:peek /backup
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h3 id="peekv3rhel8setuppgadmin4">
                            <a href="#peekv3rhel8setuppgadmin4">
                                <strong>Step 7.6 -</strong> Peek v3 RHEL8 Setup PGAdmin4
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            <p>Instructions from https://www.itzgeek.com/how-tos/linux/centos-how-tos/how-to-install-pgadmin-4-on-centos-7-rhel-7-fedora-29-fedora-28.html</p>
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8pga4deployrpms">
                            <a href="#peekv3rhel8pga4deployrpms">
                                <strong>Step 7.6.1 -</strong> Peek v3 RHEL8 PGA4 Deploy RPMs
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            
        </p>
        <p>
            Copy the File(s)
            <strong>Peek_PGAdmin4_RHEL8_RPMs.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/tmp/pkg_pgadmin4
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8pga4cleanpackages">
                            <a href="#peekv3rhel8pga4cleanpackages">
                                <strong>Step 7.6.2 -</strong> Peek v3 RHEL8 PGA4 Clean Packages
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum -y clean packages
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8pga4installrpms">
                            <a href="#peekv3rhel8pga4installrpms">
                                <strong>Step 7.6.3 -</strong> Peek v3 RHEL8 PGA4 Install RPMs
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd /tmp/pkg_pgadmin4

yum install -y *.rpm --skip-broken
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8setuppgadmin4web">
                            <a href="#peekv3rhel8setuppgadmin4web">
                                <strong>Step 7.6.4 -</strong> Peek v3 RHEL8 Setup pgadmin4-web
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxrootuser}@{targetserverlin}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
# run the pgadmin-web.sh install script
/usr/pgadmin4/bin/setup-web.sh
                </code>
            </pre>
        </div>
    </div>

    <div class="row">
        <p>
            This script may require you to answer the following prompts:
        </p>
    </div>
    <div class="row">
        <table>
            <thead>
                <tr>
                    <th>
                        Prompt
                    </th>
                    <th class="prompts">
                        Answer
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        Email address:
                    </td>
                    <td class="prompts">
                        <code class="language-sql">
{pgadmin4WebappUser.user}
                        </code>
                    </td>
                </tr>
                <tr>
                    <td>
                        password:
                    </td>
                    <td class="prompts">
                        <code class="language-sql">
{pgadmin4WebappUser.password}
                        </code>
                    </td>
                </tr>
                <tr>
                    <td>
                        Password:
                    </td>
                    <td class="prompts">
                        <code class="language-sql">
{pgadmin4WebappUser.password}
                        </code>
                    </td>
                </tr>
                <tr>
                    <td>
                        Continue (y/n)?
                    </td>
                    <td class="prompts">
                        <code class="language-sql">
y
                        </code>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>




    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8pga4complete">
                            <a href="#peekv3rhel8pga4complete">
                                <strong>Step 7.6.5 -</strong> Peek v3 RHEL8 PGA4 Complete
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxrootuser}@{peekserver}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
echo &quot;PGAdmin4 is setup and accessable on http://{peekServer.fqn}/pgadmin4&quot;
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="peekv3rhel8installsrcpythonpostgresql">
                            <a href="#peekv3rhel8installsrcpythonpostgresql">
                                <strong>Step 7.7 -</strong> Peek v3 RHEL8 Install Src Python + PostgreSQL
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8pypgupdatebashrc">
                            <a href="#peekv3rhel8pypgupdatebashrc">
                                <strong>Step 7.7.1 -</strong> Peek v3 RHEL8 PYPG Update bashrc
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            <p>Edit ~/.bashrc and append the following to the end of the file.</p>
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxpeekuser}@{peekserver}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cat &lt;&lt;&quot;EOF&quot;&gt;&gt; ~/.bashrc

##### SET THE PEEK ENVIRONMENT #####
# Setup the variables for PYTHON and POSTGRESQL
export PEEK_PY_VER=&quot;{peek3PythonVer}&quot;
export PEEK_PG_VER=&quot;{peek3PostgresqlVer}&quot;
export PEEK_CMAKE_VER=&quot;{peek3CmakeVer}&quot;
export PEEK_TSDB_VER=&quot;{peek3TimescaledbVer}&quot;

export PATH=&quot;$HOME/opt/bin:$PATH&quot;
export LD_LIBRARY_PATH=&quot;$HOME/opt/lib:$LD_LIBRARY_PATH&quot;

# Set the variables for the platform release
# These are updated by the deploy script
export PEEK_ENV=&quot;&quot;
[ -n &quot;${PEEK_ENV}&quot; ] &amp;&amp; export PATH=&quot;${PEEK_ENV}/bin:$PATH&quot;
EOF
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h3 id="peekv3rhel8installpython">
                            <a href="#peekv3rhel8installpython">
                                <strong>Step 7.7.2 -</strong> Peek v3 RHEL8 Install Python
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8ipydeploypython">
                            <a href="#peekv3rhel8ipydeploypython">
                                <strong>Step 7.7.2.1 -</strong> Peek v3 RHEL8 IPY Deploy Python
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            
        </p>
        <p>
            Copy the File(s)
            <strong>Peek_v3_Offline_Python_Source.zip</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/home/peek
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8ipyconfigurebuildinstall">
                            <a href="#peekv3rhel8ipyconfigurebuildinstall">
                                <strong>Step 7.7.2.2 -</strong> Peek v3 RHEL8 IPY Configure Build Install
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            <p>Configure the build</p>
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
PEEK_PY_VER={peek3PythonVer}

tar xvzf Python-${PEEK_PY_VER}.tgz

cd Python-${PEEK_PY_VER}
./configure --prefix=/home/peek/opt/ --enable-optimizations --enable-shared
make install
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8ipycleanup">
                            <a href="#peekv3rhel8ipycleanup">
                                <strong>Step 7.7.2.3 -</strong> Peek v3 RHEL8 IPY Cleanup
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
rm -rf Python-${PEEK_PY_VER}*
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8ipycreatesymlinks">
                            <a href="#peekv3rhel8ipycreatesymlinks">
                                <strong>Step 7.7.2.4 -</strong> Peek v3 RHEL8 IPY Create Symlinks
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd /home/peek/opt/bin
ln -s pip3 pip
ln -s python3 python
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8ipydeploypythonpypis">
                            <a href="#peekv3rhel8ipydeploypythonpypis">
                                <strong>Step 7.7.2.5 -</strong> Peek v3 RHEL8 IPY Deploy Python PyPIs
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            <p>https://pypi.org/project/pip/#files
https://pypi.org/project/virtualenv/#files
https://pypi.org/project/wheel/#files</p>
        </p>
        <p>
            Copy the File(s)
            <strong>Peek_v3_Offline_Python_PyPIs.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/tmp/peek_offline/pypis
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8ipyinstallpythonpypis">
                            <a href="#peekv3rhel8ipyinstallpythonpypis">
                                <strong>Step 7.7.2.6 -</strong> Peek v3 RHEL8 IPY Install Python PyPIs
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd /tmp/peek_offline/pypis

pip install --find-links=. --no-index pip*.whl

pip install --find-links=. --no-index virtualenv*.whl

pip install --find-links=. --no-index wheel*.whl

rm -rf /tmp/peek_offline
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="peekv3rhel8installpostgresql">
                            <a href="#peekv3rhel8installpostgresql">
                                <strong>Step 7.7.3 -</strong> Peek v3 RHEL8 Install PostgreSQL
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8ipgdeploypostgresql">
                            <a href="#peekv3rhel8ipgdeploypostgresql">
                                <strong>Step 7.7.3.1 -</strong> Peek v3 RHEL8 IPG Deploy PostgreSQL
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            
        </p>
        <p>
            Copy the File(s)
            <strong>Peek_v3_Offline_PostgreSQL_Source.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/home/peek
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8ipgconfigurebuildinstall">
                            <a href="#peekv3rhel8ipgconfigurebuildinstall">
                                <strong>Step 7.7.3.2 -</strong> Peek v3 RHEL8 IPG Configure Build Install
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            <p>Configure the build</p>
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
PEEK_PG_VER={peek3PostgresqlVer}

SRC_DIR=&quot;$HOME/postgresql-${PEEK_PG_VER}&quot;

# Remove the src dir and install file
rm -rf ${SRC_DIR} || true

tar xjf postgresql-${PEEK_PG_VER}.tar.bz2


cd ${SRC_DIR}

export CPPFLAGS=&quot; -I`echo $HOME/opt/include/python*m` &quot;
export LDFLAGS=&quot; -L$HOME/opt/lib &quot;

./configure \
      --disable-debug \
      --prefix=$HOME/opt \
      --enable-thread-safety \
      --with-openssl \
      --with-python


make -j4 &gt; make.log

make install-world &gt; make-install.log

# this is required for timescale to compile
cp ${SRC_DIR}/src/test/isolation/pg_isolation_regress ~/opt/bin

# Remove the src dir and install file
rm -rf ${SRC_DIR}*
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8ipginitcluster">
                            <a href="#peekv3rhel8ipginitcluster">
                                <strong>Step 7.7.3.3 -</strong> Peek v3 RHEL8 IPG Init Cluster
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
initdb --pgdata=$HOME/pgdata/12 --auth-local=trust  --auth-host=md5
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8ipgtunepostgresqlconf">
                            <a href="#peekv3rhel8ipgtunepostgresqlconf">
                                <strong>Step 7.7.3.4 -</strong> Peek v3 RHEL8 IPG Tune postgresql.conf
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
F=&quot;$HOME/pgdata/12/postgresql.conf&quot;

sed -i &#x27;s/max_connections = 100/max_connections = 200/g&#x27; $F

# Print the changed line
grep max_connections $F
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8ipginstallservicefile">
                            <a href="#peekv3rhel8ipginstallservicefile">
                                <strong>Step 7.7.3.5 -</strong> Peek v3 RHEL8 IPG Install Service File
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxrootuser}@{peekserver}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
F=/usr/lib/systemd/system/postgresql-12.service

cat &lt;&lt;&quot;EOF&quot; | sed &quot;s,\$HOME,`echo ~{linuxPeekUser.user}`,g&quot; &gt; $F
[Unit]
Description=PostgreSQL 12 database server
After=syslog.target
After=network.target

[Service]
Type=forking
User=peek
Group=peek

# Location of database directory
Environment=PGDATA=$HOME/pgdata/12

# Disable OOM kill on the postmaster
OOMScoreAdjust=-1000
Environment=PG_OOM_ADJUST_FILE=/proc/self/oom_score_adj
Environment=PG_OOM_ADJUST_VALUE=0

ExecStart=$HOME/opt/bin/pg_ctl -D ${PGDATA} start
ExecStop=$HOME/opt/bin/pg_ctl -D ${PGDATA} stop
ExecReload=/bin/kill -HUP $MAINPID
KillMode=mixed
KillSignal=SIGINT
 

# Do not set any timeout value, so that systemd will not kill postmaster
# during crash recovery.
TimeoutSec=0

[Install]
WantedBy=multi-user.target
EOF

systemctl daemon-reload
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="peekv3rhel8installcmake">
                            <a href="#peekv3rhel8installcmake">
                                <strong>Step 7.7.4 -</strong> Peek v3 RHEL8 Install CMake
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8icmdeploycmake">
                            <a href="#peekv3rhel8icmdeploycmake">
                                <strong>Step 7.7.4.1 -</strong> Peek v3 RHEL8 ICM Deploy CMake
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxpeekuser}@{peekserver}
                            </code>
                        </div>


    



    <div class="row">
        <p>
            
        </p>
        <p>
            Copy the File(s)
            <strong>Peek_v3_Offline_CMake_Source.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/home/peek
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8icmconfigurebuildinstall">
                            <a href="#peekv3rhel8icmconfigurebuildinstall">
                                <strong>Step 7.7.4.2 -</strong> Peek v3 RHEL8 ICM Configure Build Install
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            <p>Configure the build</p>
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
PEEK_CMAKE_VER={peek3CmakeVer}

tar xzf cmake-${PEEK_CMAKE_VER}.tar.gz
SRC_DIR=&quot;$HOME/cmake-${PEEK_CMAKE_VER}&quot;

cd ${SRC_DIR}

./configure --prefix=$HOME/opt


make -j6 install

# Remove the src dir and install file
rm -rf ${SRC_DIR}*
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="peekv3rhel8installtimescaledb">
                            <a href="#peekv3rhel8installtimescaledb">
                                <strong>Step 7.7.5 -</strong> Peek v3 RHEL8 Install TimescaleDB
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8itsdeploytimescaledb">
                            <a href="#peekv3rhel8itsdeploytimescaledb">
                                <strong>Step 7.7.5.1 -</strong> Peek v3 RHEL8 ITS Deploy TimescaleDB
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            
        </p>
        <p>
            Copy the File(s)
            <strong>Peek_v3_Offline_TimescaleDB_Source.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/home/peek
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8itsconfigurebuildinstall">
                            <a href="#peekv3rhel8itsconfigurebuildinstall">
                                <strong>Step 7.7.5.2 -</strong> Peek v3 RHEL8 ITS Configure Build Install
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            <p>Configure the build</p>
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
PEEK_TSDB_VER={peek3TimescaledbVer}

export CPPFLAGS=`pg_config --cppflags`
export LDFLAGS=`pg_config --ldflags`

tar xzf timescaledb-${PEEK_TSDB_VER}.tar.gz

SRC_DIR=&quot;$HOME/timescaledb-${PEEK_TSDB_VER}&quot;

cd ${SRC_DIR}


# Bootstrap the build system
./bootstrap

# To build the extension
cd build &amp;&amp; make

# To install
make install

cd
rm -rf ${SRC_DIR}*
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8itsinstalltstune">
                            <a href="#peekv3rhel8itsinstalltstune">
                                <strong>Step 7.7.5.3 -</strong> Peek v3 RHEL8 ITS Install TS Tune
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxrootuser}@{peekserver}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd ~{linuxPeekUser.user}
yum install -y timescale*rpm
rm timescale*rpm
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8itstunedb">
                            <a href="#peekv3rhel8itstunedb">
                                <strong>Step 7.7.5.4 -</strong> Peek v3 RHEL8 ITS Tune DB
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxpeekuser}@{peekserver}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
PGVER=12
FILE=&quot;$HOME/pgdata/${PGVER}/postgresql.conf&quot;
timescaledb-tune \
-quiet \
-yes \
-conf-path ${FILE} \
-pg-version ${PGVER} \
-max-conns=&quot;200&quot;
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8pypgstartpostgresql">
                            <a href="#peekv3rhel8pypgstartpostgresql">
                                <strong>Step 7.7.6 -</strong> Peek v3 RHEL8 PYPG Start PostgreSQL
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxrootuser}@{peekserver}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
systemctl enable postgresql-12 --now
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="peekv3lincreatepeekdb">
                            <a href="#peekv3lincreatepeekdb">
                                <strong>Step 7.8 -</strong> Peek v3 LIN Create Peek DB
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3pgdbsetsqlpassword">
                            <a href="#peekv3pgdbsetsqlpassword">
                                <strong>Step 7.8.1 -</strong> Peek v3 PGDB Set SQL Password
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxpeekuser}@{peekserver}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
psql -d postgres -U {postgresqlServiceUser.user} &lt;&lt;EOF
\password
\q
EOF
                </code>
            </pre>
        </div>
    </div>

    <div class="row">
        <p>
            This script may require you to answer the following prompts:
        </p>
    </div>
    <div class="row">
        <table>
            <thead>
                <tr>
                    <th>
                        Prompt
                    </th>
                    <th class="prompts">
                        Answer
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        Enter new password:
                    </td>
                    <td class="prompts">
                        <code class="language-sql">
{postgresqlServiceUser.password}
                        </code>
                    </td>
                </tr>
                <tr>
                    <td>
                        Enter it again:
                    </td>
                    <td class="prompts">
                        <code class="language-sql">
{postgresqlServiceUser.password}
                        </code>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>




    



                    <div class="row pt-5">
                        <h4 id="peekv3pgdbcreatedatabase">
                            <a href="#peekv3pgdbcreatedatabase">
                                <strong>Step 7.8.2 -</strong> Peek v3 PGDB Create database
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxserviceuser}@{targetserverlin}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
createdb -O {postgresqlServiceUser.user} {postgresqlServiceUser.user}
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3pgdbcleanuppsql">
                            <a href="#peekv3pgdbcleanuppsql">
                                <strong>Step 7.8.3 -</strong> Peek v3 PGDB Cleanup psql
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            <p>Cleanup traces of the password</p>
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
[ ! -e ~/.psql_history ] || rm ~/.psql_history
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="peekv3rhel8installredis">
                            <a href="#peekv3rhel8installredis">
                                <strong>Step 7.9 -</strong> Peek v3 RHEL8 Install Redis
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8redisdeployredis">
                            <a href="#peekv3rhel8redisdeployredis">
                                <strong>Step 7.9.1 -</strong> Peek v3 RHEL8 REDIS Deploy Redis
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxrootuser}@{peekserver}
                            </code>
                        </div>


    



    <div class="row">
        <p>
            
        </p>
        <p>
            Copy the File(s)
            <strong>Peek_v3_Offline_Redis_RPMs.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/tmp/offline_install/redis
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8redisinstallredis">
                            <a href="#peekv3rhel8redisinstallredis">
                                <strong>Step 7.9.2 -</strong> Peek v3 RHEL8 REDIS Install Redis
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd /tmp/offline_install/redis

# install redis and dependencies
yum install -y *.rpm
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8redisenableservice">
                            <a href="#peekv3rhel8redisenableservice">
                                <strong>Step 7.9.3 -</strong> Peek v3 RHEL8 REDIS Enable Service
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
systemctl enable redis.service
systemctl restart redis.service
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8redisincreaseclientqueuesize">
                            <a href="#peekv3rhel8redisincreaseclientqueuesize">
                                <strong>Step 7.9.4 -</strong> Peek v3 RHEL8 REDIS Increase Client Queue Size
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
BEFORE=&quot;client-output-buffer-limit pubsub 64mb 16mb 90&quot;
AFTER=&quot;client-output-buffer-limit pubsub 32mb 8mb 60&quot;
sed -i &quot;s/${BEFORE}/${AFTER}/g&quot; /etc/redis.conf

systemctl restart redis
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="peekv3rhel8installrabbitmq">
                            <a href="#peekv3rhel8installrabbitmq">
                                <strong>Step 7.10 -</strong> Peek v3 RHEL8 Install RabbitMQ
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8rmqdeployrabbitmq">
                            <a href="#peekv3rhel8rmqdeployrabbitmq">
                                <strong>Step 7.10.1 -</strong> Peek v3 RHEL8 RMQ Deploy RabbitMQ
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            
        </p>
        <p>
            Copy the File(s)
            <strong>Peek_v3_Offline_RabbitMQ_RHEL8_RPMs.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/tmp/offline_install/rabbitmq
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8rmqrabbitmqinstall">
                            <a href="#peekv3rhel8rmqrabbitmqinstall">
                                <strong>Step 7.10.2 -</strong> Peek v3 RHEL8 RMQ RabbitMQ Install
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd /tmp/offline_install/rabbitmq

# install erlang
yum install -y *.rpm
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8rmqrabbitmqsetupsystemd">
                            <a href="#peekv3rhel8rmqrabbitmqsetupsystemd">
                                <strong>Step 7.10.3 -</strong> Peek v3 RHEL8 RMQ RabbitMQ Setup Systemd
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
systemctl enable rabbitmq-server.service
systemctl restart rabbitmq-server.service
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8rmqenablemanagementplugins">
                            <a href="#peekv3rhel8rmqenablemanagementplugins">
                                <strong>Step 7.10.4 -</strong> Peek v3 RHEL8 RMQ Enable Management Plugins
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
F=&quot;/var/lib/rabbitmq/.erlang.cookie&quot;; [ ! -f $F ] || rm -f $F
rabbitmq-plugins enable rabbitmq_mqtt
rabbitmq-plugins enable rabbitmq_management
systemctl restart rabbitmq-server.service
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="peekv3rhel8installoracleinstantclient">
                            <a href="#peekv3rhel8installoracleinstantclient">
                                <strong>Step 7.11 -</strong> Peek v3 RHEL8 Install Oracle Instant Client
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8oclinstalldependencies">
                            <a href="#peekv3rhel8oclinstalldependencies">
                                <strong>Step 7.11.1 -</strong> Peek v3 RHEL8 OCL Install Dependencies
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum -y install libnsl
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8ocldeployoracleinstantclientsdk">
                            <a href="#peekv3rhel8ocldeployoracleinstantclientsdk">
                                <strong>Step 7.11.2 -</strong> Peek v3 RHEL8 OCL Deploy Oracle InstantClient SDK
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxpeekuser}@{peekserver}
                            </code>
                        </div>


    



    <div class="row">
        <p>
            <p>Download the ZIP "SDK Package" instantclient-sdk-linux.x64-18.5.0.0.0dbru.zip from http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html</p>
        </p>
        <p>
            Copy the File(s)
            <strong>Oracle_InstantClient_Linux_SDK_Package_185000.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/home/peek/oracle
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8ocldeployoracleinstantclientbasic">
                            <a href="#peekv3rhel8ocldeployoracleinstantclientbasic">
                                <strong>Step 7.11.3 -</strong> Peek v3 RHEL8 OCL Deploy Oracle InstantClient Basic
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            <p>Download the ZIP "Basic Package" instantclient-basic-linux.x64-18.5.0.0.0dbru.zip from http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html</p>
        </p>
        <p>
            Copy the File(s)
            <strong>Oracle_InstantClient_Linux_Basic_Package_185000.zip</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/home/peek/oracle
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8oclsymlinklibs">
                            <a href="#peekv3rhel8oclsymlinklibs">
                                <strong>Step 7.11.4 -</strong> Peek v3 RHEL8 OCL Symlink Libs
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd ~/oracle/instantclient_18_5
ln -snvf libclntsh.so.18.1 libclntsh.so
ln -snvf libocci.so.18.1 libocci.so
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8oclupdatebashrc">
                            <a href="#peekv3rhel8oclupdatebashrc">
                                <strong>Step 7.11.5 -</strong> Peek v3 RHEL8 OCL Update bashrc
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cat &lt;&lt;&quot;EOF&quot;&gt;&gt; ~/.bashrc

# Setup the variables for ORACLE
export LD_LIBRARY_PATH=&quot;/home/peek/oracle/instantclient_18_5:$LD_LIBRARY_PATH&quot;
export ORACLE_HOME=&quot;/home/peek/oracle/instantclient_18_5&quot;

EOF
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="peekv3rhel8installfreetds">
                            <a href="#peekv3rhel8installfreetds">
                                <strong>Step 7.12 -</strong> Peek v3 RHEL8 Install Free TDS
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8iftdsupdatebashrc">
                            <a href="#peekv3rhel8iftdsupdatebashrc">
                                <strong>Step 7.12.1 -</strong> Peek v3 RHEL8 IFTDS Update bashrc
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cat &lt;&lt;&quot;EOF&quot;&gt;&gt; ~/.bashrc

# Setup the variables for FREE TDS
export LD_LIBRARY_PATH=&quot;/home/peek/freetds:$LD_LIBRARY_PATH&quot;

EOF
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8iftdsdeployfreetds">
                            <a href="#peekv3rhel8iftdsdeployfreetds">
                                <strong>Step 7.12.2 -</strong> Peek v3 RHEL8 IFTDS Deploy FreeTDS
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxrootuser}@{peekserver}
                            </code>
                        </div>


    



    <div class="row">
        <p>
            
        </p>
        <p>
            Copy the File(s)
            <strong>Peek_v3_Offline_FreeTDS_RHEL8_RPMs.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/tmp/offline_install/freetds
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8iftdsinstallfreetds">
                            <a href="#peekv3rhel8iftdsinstallfreetds">
                                <strong>Step 7.12.3 -</strong> Peek v3 RHEL8 IFTDS Install FreeTDS
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd /tmp/offline_install/freetds

yum install -y *.rpm
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3rhel8iftdscreatefreetdsconf">
                            <a href="#peekv3rhel8iftdscreatefreetdsconf">
                                <strong>Step 7.12.4 -</strong> Peek v3 RHEL8 IFTDS Create freetds.conf
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxpeekuser}@{peekserver}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
mkdir ~/freetds
touch ~/freetds/freetds.conf

cat &lt;&lt;&quot;EOF&quot;&gt;&gt; ~/freetds/freetds.conf

[global]
    port = 1433
    instance = peek
    tds version = 7.4

EOF
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="peekv3linconfigurejsonconfig">
                            <a href="#peekv3linconfigurejsonconfig">
                                <strong>Step 7.13 -</strong> Peek v3 LIN Configure JSON Config
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccdeployskeletonconfig">
                            <a href="#peekv3linpccdeployskeletonconfig">
                                <strong>Step 7.13.1 -</strong> Peek v3 LIN PCC Deploy Skeleton Config
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            
        </p>
        <p>
            Copy the File(s)
            <strong>Peek_v3_Skeleton_Config_JSON_DMS_Diagram.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/home/peek
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccconfigureenabledplugins">
                            <a href="#peekv3linpccconfigureenabledplugins">
                                <strong>Step 7.13.2 -</strong> Peek v3 LIN PCC Configure Enabled Plugins
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove

homeDir = expanduser(&quot;~&quot;)

SKELETON_FILE = &quot;%s/skeleton_config.json&quot; % homeDir

with open(SKELETON_FILE) as f:
    skeletonJson = json.loads(f.read())

services = [&quot;logic&quot;, &quot;agent&quot;, &quot;worker&quot;, &quot;office&quot;, &quot;field&quot;]

for service in services:
    cfgFile = &quot;%s/peek-%s-service.home/config.json&quot; % (homeDir, service)
    print(&quot;Configuring &quot; + cfgFile)

    if exists(cfgFile):
        print(&quot;Updating plugins&quot;)
        with open(cfgFile) as f:
            data = json.loads(f.read())
            
            # Set default
            data[&quot;plugin&quot;] = data.get(&quot;plugin&quot;, {})
            
            # Update the plugins
            data[&quot;plugin&quot;][&quot;enabled&quot;] = skeletonJson[&quot;plugin&quot;][&quot;enabled&quot;]
            
    else:
        print(&quot;Setting plugins&quot;)
        data = skeletonJson
    
    if not exists(dirname(cfgFile)):
        makedirs(dirname(cfgFile))
    
    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))
        
print(&quot;Removing skeleton file &quot; + SKELETON_FILE)
remove(SKELETON_FILE)
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccremovepeekplugindocdb">
                            <a href="#peekv3linpccremovepeekplugindocdb">
                                <strong>Step 7.13.3 -</strong> Peek v3 LIN PCC Remove peek_plugin_docdb
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
sed -i &#x27;/peek_plugin_docdb/d&#x27; peek*.home/config.json
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccconfiguresqlalchemyurl">
                            <a href="#peekv3linpccconfiguresqlalchemyurl">
                                <strong>Step 7.13.4 -</strong> Peek v3 LIN PCC Configure SQLAlchemy URL
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove

homeDir = expanduser(&quot;~&quot;)

services = [&quot;logic&quot;, &quot;worker&quot;, &quot;storage&quot;]

URL = &quot;postgresql://{postgresqlServiceUser.user}:{postgresqlServiceUser.password}@127.0.0.1/peek&quot;

for service in services:
    cfgFile = &quot;%s/peek-%s-service.home/config.json&quot; % (homeDir, service)
    print(&quot;Configuring &quot; + cfgFile)

    if exists(cfgFile):
        print(&quot;Updating plugins&quot;)
        with open(cfgFile) as f:
            data = json.loads(f.read())
            
            # Set default
            data[&quot;sqlalchemy&quot;] = data.get(&quot;sqlalchemy&quot;, {})
            
            # Update the plugins
            data[&quot;sqlalchemy&quot;][&quot;connectUrl&quot;] = URL
            
    else:
        print(&quot;Setting plugins&quot;)
        data = {
            &quot;sqlalchemy&quot;: {
                &quot;connectUrl&quot;: URL,
            }
        }
    
    if not exists(dirname(cfgFile)):
        makedirs(dirname(cfgFile))
        
    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccconfigurerecoveryadminuser">
                            <a href="#peekv3linpccconfigurerecoveryadminuser">
                                <strong>Step 7.13.5 -</strong> Peek v3 LIN PCC Configure Recovery Admin User
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove

cfgFile = &quot;%s/peek-logic-service.home/config.json&quot; % expanduser(&quot;~&quot;)
print(&quot;Configuring &quot; + cfgFile)

if exists(cfgFile):
    print(&quot;Updating plugins&quot;)
    with open(cfgFile) as f:
        data = json.loads(f.read())
        
else:
    if not exists(dirname(cfgFile)):
        makedirs(dirname(cfgFile))
        
    print(&quot;Setting plugins&quot;)
    data = {}
        
# Update the login
data[&quot;httpServer&quot;] = data.get(&quot;httpServer&quot;, {})
data[&quot;httpServer&quot;][&quot;admin&quot;] = data[&quot;httpServer&quot;].get(&quot;admin&quot;, {})
data[&quot;httpServer&quot;][&quot;admin&quot;][&quot;recovery_user&quot;] = {
    &quot;password&quot;: &quot;{peekRecoveryAdminUser.password}&quot;,
    &quot;username&quot;: &quot;{peekRecoveryAdminUser.user}&quot;
}
    
print(&quot;Writing config&quot;)
with open(cfgFile, &quot;w&quot;) as f:
    f.write(json.dumps(data, indent=4))
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccupdatefilesystempaths">
                            <a href="#peekv3linpccupdatefilesystempaths">
                                <strong>Step 7.13.6 -</strong> Peek v3 LIN PCC Update File System Paths
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove

homeDir = expanduser(&quot;~&quot;)

services = [&quot;logic&quot;, &quot;agent&quot;, &quot;worker&quot;, &quot;office&quot;, &quot;field&quot;]


def fixPath(path, service):
    # Strip of the c:
    if &quot;:&quot; in path:
        path = path.split(&quot;:&quot;, 1)[1]

    # Ensure the separators are RHEL format
    path = path.replace(&quot;\\&quot;, &quot;/&quot;)
    
    # Rehome the path.
    serviceDirName = &quot;peek-%s-service.home&quot; % service
    
    if serviceDirName not in path:
        return path
        
    path = path[path.index(serviceDirName) + len(serviceDirName):].strip(&#x27;/&#x27;)
    
    return &quot;%s/peek-%s-service.home/%s&quot; % (homeDir, service, path)


for service in services:
    cfgFile = &quot;%s/peek-%s-service.home/config.json&quot; % (homeDir, service)

    if not exists(cfgFile):
        print(&quot;Skipping non-existent &quot; + cfgFile)
        continue
    
    print(&quot;Configuring &quot; + cfgFile)
    with open(cfgFile) as f:
        data = json.loads(f.read())
        
        if &quot;disk&quot; in data and &quot;tmp&quot; in data[&quot;disk&quot;]:
            data[&quot;disk&quot;][&quot;tmp&quot;] = fixPath(data[&quot;disk&quot;][&quot;tmp&quot;], service)

        if &quot;frontend&quot; in data:
            frontend = data[&quot;frontend&quot;]
            keys = [&quot;frontendCustomisations&quot;,
                    &quot;frontendNodeModuleOverlayDir&quot;,
                    &quot;frontendSrcOverlayDir&quot;]
                    
            for key in keys:
                if key in frontend:
                    frontend[key] = fixPath(frontend[key], service)
                
            data[&quot;frontend&quot;] = frontend
        
        if &quot;plugin&quot; in data and &quot;dataPath&quot; in data[&quot;plugin&quot;]:
            data[&quot;plugin&quot;][&quot;dataPath&quot;] = fixPath(data[&quot;plugin&quot;][&quot;dataPath&quot;], service)

            
    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccupdatefieldofficeappkeys">
                            <a href="#peekv3linpccupdatefieldofficeappkeys">
                                <strong>Step 7.13.7 -</strong> Peek v3 LIN PCC Update Field Office App Keys
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove


cfgFile = expanduser(&quot;~/peek-field-service.home/config.json&quot;)

if exists(cfgFile):
    print(&quot;Configuring &quot; + cfgFile)
    with open(cfgFile) as f:
        data = json.loads(f.read())
        
        if &quot;frontend&quot; in data and &quot;nativescriptBuildPrepareEnabled&quot; in data[&quot;frontend&quot;]:
            del data[&quot;frontend&quot;][&quot;nativescriptBuildPrepareEnabled&quot;]
        
        if &quot;httpServer&quot; in data and &quot;office&quot; in data[&quot;httpServer&quot;]:
            del data[&quot;httpServer&quot;][&quot;office&quot;]
        
        if &quot;server&quot; in data:
            if &quot;webSocketPort&quot; in data[&quot;server&quot;]:
                del data[&quot;server&quot;][&quot;webSocketPort&quot;]
            
            if &quot;docSitePort&quot; in data[&quot;server&quot;]:
                del data[&quot;server&quot;][&quot;docSitePort&quot;]
    
            if &quot;desktopSitePort&quot; in data[&quot;server&quot;]:
                del data[&quot;server&quot;][&quot;desktopSitePort&quot;]
    
            if &quot;mobileSitePort&quot; in data[&quot;server&quot;]:
                data[&quot;server&quot;][&quot;fieldSitePort&quot;] = data[&quot;server&quot;][&quot;mobileSitePort&quot;]
                del data[&quot;server&quot;][&quot;mobileSitePort&quot;]

            
    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))



cfgFile = expanduser(&quot;~/peek-office-service.home/config.json&quot;)

if exists(cfgFile):
    print(&quot;Configuring &quot; + cfgFile)
    with open(cfgFile) as f:
        data = json.loads(f.read())
        
        if &quot;frontend&quot; in data and &quot;nativescriptBuildPrepareEnabled&quot; in data[&quot;frontend&quot;]:
            del data[&quot;frontend&quot;][&quot;nativescriptBuildPrepareEnabled&quot;]
        
        if &quot;httpServer&quot; in data and &quot;field&quot; in data[&quot;httpServer&quot;]:
            del data[&quot;httpServer&quot;][&quot;field&quot;]
        
        if &quot;server&quot; in data:
            if &quot;webSocketPort&quot; in data[&quot;server&quot;]:
                del data[&quot;server&quot;][&quot;webSocketPort&quot;]
            
            if &quot;docSitePort&quot; in data[&quot;server&quot;]:
                del data[&quot;server&quot;][&quot;docSitePort&quot;]
    
            if &quot;desktopSitePort&quot; in data[&quot;server&quot;]:
                data[&quot;server&quot;][&quot;officeSitePort&quot;] = data[&quot;server&quot;][&quot;desktopSitePort&quot;]
                del data[&quot;server&quot;][&quot;desktopSitePort&quot;]
    
            if &quot;mobileSitePort&quot; in data[&quot;server&quot;]:
                del data[&quot;server&quot;][&quot;mobileSitePort&quot;]

            
    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccupdatehomepaths">
                            <a href="#peekv3linpccupdatehomepaths">
                                <strong>Step 7.13.8 -</strong> Peek v3 LIN PCC Update Home Paths
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
F=&quot;peek-logic-service.home/config.json&quot;
[ -f ${F} ] &amp;&amp; sed -i &#x27;s|peek-server.home|peek-logic-service.home|g&#x27; ${F}

F=&quot;peek-worker-service.home/config.json&quot;
[ -f ${F} ] &amp;&amp; sed -i &#x27;s|peek-worker.home|peek-worker-service.home|g&#x27; ${F}

F=&quot;peek-agent-service.home/config.json&quot;
[ -f ${F} ] &amp;&amp; sed -i &#x27;s|peek-agent.home|peek-agent-service.home|g&#x27; ${F}

F=&quot;peek-office-service.home/config.json&quot;
[ -f ${F} ] &amp;&amp; sed -i &#x27;s|peek-client.home|peek-office-service.home|g&#x27; ${F}

F=&quot;peek-field-service.home/config.json&quot;
[ -f ${F} ] &amp;&amp; sed -i &#x27;s|peek-client.home|peek-field-service.home|g&#x27; ${F}
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccupdatepofpluginnames">
                            <a href="#peekv3linpccupdatepofpluginnames">
                                <strong>Step 7.13.9 -</strong> Peek v3 LIN PCC Update PoF Plugin Names
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
sed -i &#x27;s/peek_plugin_pof/peek_plugin_enmac/g&#x27; peek*.home/config.json
sed -i &#x27;s/peek_plugin_pon/peek_plugin_enmac/g&#x27; peek*.home/config.json
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpcccleanupoldsettings">
                            <a href="#peekv3linpcccleanupoldsettings">
                                <strong>Step 7.13.10 -</strong> Peek v3 LIN PCC Cleanup Old Settings
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove

homeDir = expanduser(&quot;~&quot;)

services = [&quot;logic&quot;, &quot;agent&quot;, &quot;worker&quot;, &quot;office&quot;, &quot;field&quot;]

for service in services:
    cfgFile = &quot;%s/peek-%s-service.home/config.json&quot; % (homeDir, service)
    print(&quot;Configuring &quot; + cfgFile)

    if not exists(cfgFile):
        continue
    
    print(&quot;Cleaning plugins&quot;)
    with open(cfgFile) as f:
        data = json.loads(f.read())
        
        # Set default
        plugin = data.get(&quot;plugin&quot;)
        
        for key in list(plugin):
            if key.startswith(&quot;peek_plugin&quot;) or key.startswith(&quot;peek_core&quot;):
                del plugin[key]
                
        data[&quot;plugin&quot;] = plugin
        
        if service == &quot;logic&quot;:
            if &quot;platform&quot; in data:
                del data[&quot;platform&quot;]
                
            if &quot;server&quot; in data:
                del data[&quot;server&quot;]
            
    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccenableproductionfrontends">
                            <a href="#peekv3linpccenableproductionfrontends">
                                <strong>Step 7.13.11 -</strong> Peek v3 LIN PCC Enable Production Frontends
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove

homeDir = expanduser(&quot;~&quot;)

services = [&quot;logic&quot;, &quot;office&quot;, &quot;field&quot;]

for service in services:
    cfgFile = &quot;%s/peek-%s-service.home/config.json&quot; % (homeDir, service)
    print(&quot;Configuring &quot; + cfgFile)

    if not exists(cfgFile):
        continue
    
    with open(cfgFile) as f:
        data = json.loads(f.read())
        
        # Set default
        print(&quot;Setting Production Flags for Frontend&quot;)
        frontend = data.get(&quot;frontend&quot;, {})
        frontend[&quot;docBuildEnabled&quot;] = True
        frontend[&quot;docBuildPrepareEnabled&quot;] = True
        frontend[&quot;docSyncFilesForDebugEnabled&quot;] = False
        
        frontend[&quot;webBuildPrepareEnabled&quot;] = True
        frontend[&quot;webBuildEnabled&quot;] = True
        frontend[&quot;syncFilesForDebugEnabled&quot;] = False

            
    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccenableproductionlogging">
                            <a href="#peekv3linpccenableproductionlogging">
                                <strong>Step 7.13.12 -</strong> Peek v3 LIN PCC Enable Production Logging
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove

homeDir = expanduser(&quot;~&quot;)

services = [&quot;logic&quot;, &quot;office&quot;, &quot;field&quot;, &quot;agent&quot;, &quot;worker&quot;]

for service in services:
    cfgFile = &quot;%s/peek-%s-service.home/config.json&quot; % (homeDir, service)
    print(&quot;Configuring &quot; + cfgFile)

    if not exists(cfgFile):
        continue
    
    with open(cfgFile) as f:
        data = json.loads(f.read())

        # Set default
        print(&quot;Setting Production Flags for Logging&quot;)
        frontend = data.get(&quot;logging&quot;, {})
        frontend[&quot;rotateSizeMb&quot;] = 20
        frontend[&quot;rotationsToKeep&quot;] = 10
        frontend[&quot;level&quot;] = &quot;INFO&quot;
        frontend[&quot;debugMemoryMask&quot;] = 0
        frontend[&quot;logToStdout&quot;] = False
        
        frontend[&quot;syslog&quot;] = frontend.get(&quot;syslog&quot;, {})
        frontend[&quot;syslog&quot;][&quot;logToSysloyHost&quot;] = None

    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccenableproductionworker">
                            <a href="#peekv3linpccenableproductionworker">
                                <strong>Step 7.13.13 -</strong> Peek v3 LIN PCC Enable Production Worker
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove

homeDir = expanduser(&quot;~&quot;)

services = [&quot;logic&quot;]

for service in services:
    cfgFile = &quot;%s/peek-%s-service.home/config.json&quot; % (homeDir, service)
    print(&quot;Configuring &quot; + cfgFile)

    if not exists(cfgFile):
        continue
    
    with open(cfgFile) as f:
        data = json.loads(f.read())
        
        # Set default
        print(&quot;Enabling Celery Worker&quot;)
        data[&quot;celery&quot;] = data.get(&quot;celery&quot;, {})
        data[&quot;celery&quot;][&quot;plpython&quot;] = data[&quot;celery&quot;].get(&quot;plpython&quot;, {})
        data[&quot;celery&quot;][&quot;plpython&quot;][&quot;enable&quot;] = False

            
    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h4 id="rhelcleanuppackages">
                            <a href="#rhelcleanuppackages">
                                <strong>Step 7.14 -</strong> RHEL Cleanup Packages
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxrootuser}@{targetserverlin}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
yum clean all
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="linreboot">
                            <a href="#linreboot">
                                <strong>Step 7.15 -</strong> LIN Reboot
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
nohup shutdown -r now &amp;
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="linrebootwait">
                            <a href="#linrebootwait">
                                <strong>Step 7.16 -</strong> LIN Reboot Wait
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>












    

    <div class="row">
        <p class="mb-0">
            Check if TCP Port <strong>0</strong> is listening.
            Make sure the TCP Port goes down for
            <strong>3</strong> seconds.
            When the TCP Port is up, wait <strong>10</strong>
            seconds.
        </p>
        <p>Use Telnet to check if the TCP Service is accepting connections.</p>
    </div>





    



                    <div class="row pt-5">
                        <h3 id="peekv3lindeployrelease">
                            <a href="#peekv3lindeployrelease">
                                <strong>Step 7.17 -</strong> Peek v3 LIN Deploy Release 
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrecleaninstallfiles">
                            <a href="#peekv3linpdrecleaninstallfiles">
                                <strong>Step 7.17.1 -</strong> Peek v3 LIN PDRE Clean Install Files
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxpeekuser}@{peekserver}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
rm -rf peek_install
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3pullreleasefromnexus">
                            <a href="#peekv3pullreleasefromnexus">
                                <strong>Step 7.17.2 -</strong> Peek v3 Pull Release from Nexus 
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
PEEK_RELEASE={peekReleaseNumber}
echo &quot;Creating the install directory&quot;
mkdir /home/peek/peek_install
cd /home/peek/peek_install
echo &quot;Installing the Peek Release&quot;
wget http://10.3.2.41/repository/synerty-packages/peek_release_linux_v$PEEK_RELEASE.tar
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3extractrelease">
                            <a href="#peekv3extractrelease">
                                <strong>Step 7.17.3 -</strong> Peek v3 Extract Release
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd /home/peek/peek_install
tar -xvf peek_release_linux_v3.2.*.tar
rm -r *.tar
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrestoppeek">
                            <a href="#peekv3linpdrestoppeek">
                                <strong>Step 7.17.4 -</strong> Peek v3 LIN PDRE Stop Peek
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
for s in peek_agent peek_field peek_office peek_logic peek_worker
do
    sudo systemctl stop $s || true
done

pkill -9 -f run_peek || true
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdredeleteoldreleases">
                            <a href="#peekv3linpdredeleteoldreleases">
                                <strong>Step 7.17.5 -</strong> Peek v3 LIN PDRE Delete Old Releases
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
rm -rf synerty-peek*
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdredeleteoldlogs">
                            <a href="#peekv3linpdredeleteoldlogs">
                                <strong>Step 7.17.6 -</strong> Peek v3 LIN PDRE Delete Old Logs
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
rm -f *.log*
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdreinstallrelease">
                            <a href="#peekv3linpdreinstallrelease">
                                <strong>Step 7.17.7 -</strong> Peek v3 LIN PDRE Install Release
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
RELEASE_DIR=&quot;`ls -d /home/peek/peek_install/peek_release_*`&quot;

platformArchive=&quot;`ls ${RELEASE_DIR}/peek_community_linux_*`&quot;
pluginsArchive=&quot;`ls ${RELEASE_DIR}/peek_enterprise_linux_*`&quot;

deployScript=&quot;${RELEASE_DIR}/deploy_release_linux.sh&quot;

VER=`basename ${platformArchive} | sed  &#x27;s/peek_platform_linux_//g;s/.tar.bz2//g&#x27;`

EXISTING=&quot;/home/peek/synerty-peek-${VER}&quot;
if [ -d $EXISTING ]
then
    echo &quot;Deleting existing release ${EXISTING}&quot;
    rm -rf ${EXISTING}
else
    echo &quot;There is no existing release for version ${VER} deployed, good&quot;
fi

# Make the deploy script not cleanup the release dir
sed -iv &#x27;s|^rm -rf ${releaseDir}|# Commented out by Attune step : |g&#x27; $deployScript
sed -iv &#x27;s|^pkill -9|# Commented out by Attune step : |g&#x27; $deployScript

# Push the system python to the front.
export PATH=&quot;~/opt/bin:${PATH}&quot;

# Run the platform deployment
bash $deployScript $platformArchive $pluginsArchive

# Move the release to the install directory
# It takes minutes to extract just these files again.
cp -pvr ~/peek_community_linux/init ${RELEASE_DIR}

# Now delete the release dir
rm -rf ~/peek_community_linux
                </code>
            </pre>
        </div>
    </div>

    <div class="row">
        <p>
            This script may require you to answer the following prompts:
        </p>
    </div>
    <div class="row">
        <table>
            <thead>
                <tr>
                    <th>
                        Prompt
                    </th>
                    <th class="prompts">
                        Answer
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        Do you want to permanently enable this release?
                    </td>
                    <td class="prompts">
                        <code class="language-sql">
y
                        </code>
                    </td>
                </tr>
                <tr>
                    <td>
                        Do you want to update the init scripts to auto start peek?
                    </td>
                    <td class="prompts">
                        <code class="language-sql">
n
                        </code>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>




    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrecheckpackageversions">
                            <a href="#peekv3linpdrecheckpackageversions">
                                <strong>Step 7.17.8 -</strong> Peek v3 LIN PDRE Check Package Versions
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
function freeze {
    pip freeze | grep peek | sed &#x27;s/%2B/+/g&#x27;
}

VER=`freeze | grep synerty-peek | sed &#x27;s/synerty-peek==//g&#x27;`

if [ `freeze | grep -v ${VER} | wc -l` -eq 0 ]
then
    echo &quot;All packages installed are the right version, which is ${VER}&quot;
else
    echo &quot;Packages installed are from the wrong version&quot; &gt;&amp;2
    echo &quot;The version should be ${VER}&quot; &gt;&amp;2
    freeze | grep -v ${VER}
    false
fi
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrepatchpeekutilscripts">
                            <a href="#peekv3linpdrepatchpeekutilscripts">
                                <strong>Step 7.17.9 -</strong> Peek v3 LIN PDRE Patch Peek Util Scripts
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
SCRIPTS=&quot;&quot;
SCRIPTS=&quot;${SCRIPTS} restart_peek.sh&quot;
SCRIPTS=&quot;${SCRIPTS} stop_peek.sh&quot;

for F in ${SCRIPTS}
do
    [ &quot;{peekEnableLogic}&quot;  -eq 1 ] || sed -i &#x27;s/peek_logic//g&#x27;  synerty-peek*/bin/${F}
    [ &quot;{peekEnableWorker}&quot; -eq 1 ] || sed -i &#x27;s/peek_worker//g&#x27; synerty-peek*/bin/${F}
    [ &quot;{peekEnableField}&quot;  -eq 1 ] || sed -i &#x27;s/peek_field//g&#x27;  synerty-peek*/bin/${F}
    [ &quot;{peekEnableOffice}&quot; -eq 1 ] || sed -i &#x27;s/peek_office//g&#x27; synerty-peek*/bin/${F}
    [ &quot;{peekEnableAgent}&quot;  -eq 1 ] || sed -i &#x27;s/peek_agent//g&#x27;  synerty-peek*/bin/${F}
done
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdreinstallsystemdandrestart">
                            <a href="#peekv3linpdreinstallsystemdandrestart">
                                <strong>Step 7.17.10 -</strong> Peek v3 LIN PDRE Install Systemd and Restart
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxrootuser}@{peekserver}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
PS1=&quot;&quot;
LD_LIBRARY_PATH=&quot;&quot;

source ~peek/.bashrc
PEEK_HOME=`echo ~{linuxPeekUser.user}`

cd ~peek/peek_install/*

chown -R peek:peek .

SERVICES=&quot;&quot;
if [ &quot;{peekEnableLogic}&quot;  -eq 1 ]; then SERVICES=&quot;${SERVICES} peek_logic&quot;; fi
if [ &quot;{peekEnableWorker}&quot; -eq 1 ]; then SERVICES=&quot;${SERVICES} peek_worker&quot;; fi
if [ &quot;{peekEnableOffice}&quot; -eq 1 ]; then SERVICES=&quot;${SERVICES} peek_office&quot;; fi
if [ &quot;{peekEnableField}&quot;  -eq 1 ]; then SERVICES=&quot;${SERVICES} peek_field&quot;; fi
if [ &quot;{peekEnableAgent}&quot;  -eq 1 ]; then SERVICES=&quot;${SERVICES} peek_agent&quot;;  fi

for s in $SERVICES
do
    FILE=&quot;${s}.service&quot;
    TO=&quot;/lib/systemd/system/&quot;

    cp -p init/${FILE} ${TO}
    chmod +x ${TO}/${FILE}
    chown root:root ${TO}/${FILE}
    sed -i &quot;s,#PEEK_DIR#,${PEEK_ENV}/bin,g&quot; ${TO}/${FILE}
    sed -i &quot;s,#ORACLE_HOME#,${ORACLE_HOME},g&quot; ${TO}/${FILE}
    sed -i &quot;s,#PEEK_HOME#,${PEEK_HOME},g&quot; ${TO}/${FILE}
    systemctl enable $s
    systemctl restart $s

done

systemctl daemon-reload

echo &quot; &quot;
echo &quot;Done&quot;
echo &quot; &quot;
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrecleaninstallfiles">
                            <a href="#peekv3linpdrecleaninstallfiles">
                                <strong>Step 7.17.11 -</strong> Peek v3 LIN PDRE Clean Install Files
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxpeekuser}@{peekserver}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
rm -rf peek_install
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrelistpackages">
                            <a href="#peekv3linpdrelistpackages">
                                <strong>Step 7.17.12 -</strong> Peek v3 LIN PDRE List Packages
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
# Capture all the logged packages
pip freeze

echo which pip
which pip

echo which python
which python

pip freeze | grep &#x27;peek&#x27;
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="peekv3linrestoredataset">
                            <a href="#peekv3linrestoredataset">
                                <strong>Step 7.18 -</strong> Peek v3 LIN Restore Dataset
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrcleanrestoredir">
                            <a href="#peekv3linpdrcleanrestoredir">
                                <strong>Step 7.18.1 -</strong> Peek v3 LIN PDR Clean Restore Dir
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd /backup

if [ -d restore ]; then
    echo &quot;Cleaning restore directory&quot;
    rm -rf restore
else
    echo &quot;No cleaning required&quot;
fi
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrdeploydataset">
                            <a href="#peekv3linpdrdeploydataset">
                                <strong>Step 7.18.2 -</strong> Peek v3 LIN PDR Deploy Dataset
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            
        </p>
        <p>
            Copy the File(s)
            <strong>Peek_Datacut_bnnnp1pek3.zip</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/backup/restore
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrextractdataset">
                            <a href="#peekv3linpdrextractdataset">
                                <strong>Step 7.18.3 -</strong> Peek v3 LIN PDR Extract Dataset
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd /backup/restore

# if [ &quot;`ls *latest.7z | wc -l`&quot; -ne &quot;1&quot; ]; then
#     echo &quot;We expect only one file ending in *latest.7z&quot;
#     ls *latest.7z
#     false
# fi

7z x -bt -mmt8 `ls -r *.7z | head -1`

# 7z a \
#     -bt \
#     -mmt8 \
#     -p{peekDbEncryptionKey.password} \
#     $ARCHIVE_7Z $NEW_DIR_NAME
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrrenamedataset">
                            <a href="#peekv3linpdrrenamedataset">
                                <strong>Step 7.18.4 -</strong> Peek v3 LIN PDR Rename Dataset
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd /backup/restore

rm -v *.7z

# If this is a ad-hoc backup, check to see if we need to move files
if [ -d peek-logic-service.home ]
then
    echo &quot;We don&#x27;t need need to move anything&quot;
else
    mv -v */* .
fi

! [ -d peek-server.home ] || mv -v peek-server.home peek-logic-service.home
! [ -d peek-worker.home ] || mv -v peek-worker.home peek-worker-service.home
! [ -d peek-agent.home ] || mv -v peek-agent.home peek-agent-service.home
! [ -d peek-storage.home ] || mv -v peek-storage.home peek-storage-service.home
! [ -d peek-client.home ] || cp -prv peek-client.home peek-office-service.home
! [ -d peek-client.home ] || mv -v peek-client.home peek-field-service.home
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrstoppeek">
                            <a href="#peekv3linpdrstoppeek">
                                <strong>Step 7.18.5 -</strong> Peek v3 LIN PDR Stop Peek
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
for s in peek_agent peek_worker peek_field peek_office peek_logic
do
        echo &quot;Stopping $s&quot;
        sudo systemctl stop ${s}.service || true
done

echo &quot;Waiting for services to stop&quot;
sleep 5s

echo &quot;Killing anything left running&quot;
pkill -9 -u $USER -f python || true
                </code>
            </pre>
        </div>
    </div>

    <div class="row">
        <p>
            This script may require you to answer the following prompts:
        </p>
    </div>
    <div class="row">
        <table>
            <thead>
                <tr>
                    <th>
                        Prompt
                    </th>
                    <th class="prompts">
                        Answer
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        password for peek:
                    </td>
                    <td class="prompts">
                        <code class="language-sql">
{linuxPeekUser.password}
                        </code>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>




    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrreloadpeekdb">
                            <a href="#peekv3linpdrreloadpeekdb">
                                <strong>Step 7.18.6 -</strong> Peek v3 LIN PDR Reload Peek DB
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
DB_FILE=`ls /backup/restore/peek.sql`

if ! [ -f ${DB_FILE} ]
then
    echo &quot;The database file doesn&#x27;t exist&quot;
    false
fi

dropdb peek
createdb -O peek peek

cat ${DB_FILE} | psql
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrdropplpython3ulanguage">
                            <a href="#peekv3linpdrdropplpython3ulanguage">
                                <strong>Step 7.18.7 -</strong> Peek v3 LIN PDR Drop plpython3u Language
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
psql &lt;&lt; EOF
DROP language IF EXISTS plpython3u CASCADE;
EOF
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrrestorepeekconfigfiles">
                            <a href="#peekv3linpdrrestorepeekconfigfiles">
                                <strong>Step 7.18.8 -</strong> Peek v3 LIN PDR Restore Peek Config Files
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
# Remove logs
rm -rvf peek*.log*

# Remove existing homges
rm -rf peek-*.home

# Move backup homes into place
mv -v /backup/restore/peek*.home . || true

# Clean temp dirs
rm -rf peek-*.home/tmp
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h3 id="peekv3linconfigurejsonconfig">
                            <a href="#peekv3linconfigurejsonconfig">
                                <strong>Step 7.18.9 -</strong> Peek v3 LIN Configure JSON Config
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccdeployskeletonconfig">
                            <a href="#peekv3linpccdeployskeletonconfig">
                                <strong>Step 7.18.9.1 -</strong> Peek v3 LIN PCC Deploy Skeleton Config
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            
        </p>
        <p>
            Copy the File(s)
            <strong>Peek_v3_Skeleton_Config_JSON_DMS_Diagram.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/home/peek
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccconfigureenabledplugins">
                            <a href="#peekv3linpccconfigureenabledplugins">
                                <strong>Step 7.18.9.2 -</strong> Peek v3 LIN PCC Configure Enabled Plugins
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove

homeDir = expanduser(&quot;~&quot;)

SKELETON_FILE = &quot;%s/skeleton_config.json&quot; % homeDir

with open(SKELETON_FILE) as f:
    skeletonJson = json.loads(f.read())

services = [&quot;logic&quot;, &quot;agent&quot;, &quot;worker&quot;, &quot;office&quot;, &quot;field&quot;]

for service in services:
    cfgFile = &quot;%s/peek-%s-service.home/config.json&quot; % (homeDir, service)
    print(&quot;Configuring &quot; + cfgFile)

    if exists(cfgFile):
        print(&quot;Updating plugins&quot;)
        with open(cfgFile) as f:
            data = json.loads(f.read())
            
            # Set default
            data[&quot;plugin&quot;] = data.get(&quot;plugin&quot;, {})
            
            # Update the plugins
            data[&quot;plugin&quot;][&quot;enabled&quot;] = skeletonJson[&quot;plugin&quot;][&quot;enabled&quot;]
            
    else:
        print(&quot;Setting plugins&quot;)
        data = skeletonJson
    
    if not exists(dirname(cfgFile)):
        makedirs(dirname(cfgFile))
    
    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))
        
print(&quot;Removing skeleton file &quot; + SKELETON_FILE)
remove(SKELETON_FILE)
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccremovepeekplugindocdb">
                            <a href="#peekv3linpccremovepeekplugindocdb">
                                <strong>Step 7.18.9.3 -</strong> Peek v3 LIN PCC Remove peek_plugin_docdb
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
sed -i &#x27;/peek_plugin_docdb/d&#x27; peek*.home/config.json
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccconfiguresqlalchemyurl">
                            <a href="#peekv3linpccconfiguresqlalchemyurl">
                                <strong>Step 7.18.9.4 -</strong> Peek v3 LIN PCC Configure SQLAlchemy URL
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove

homeDir = expanduser(&quot;~&quot;)

services = [&quot;logic&quot;, &quot;worker&quot;, &quot;storage&quot;]

URL = &quot;postgresql://{postgresqlServiceUser.user}:{postgresqlServiceUser.password}@127.0.0.1/peek&quot;

for service in services:
    cfgFile = &quot;%s/peek-%s-service.home/config.json&quot; % (homeDir, service)
    print(&quot;Configuring &quot; + cfgFile)

    if exists(cfgFile):
        print(&quot;Updating plugins&quot;)
        with open(cfgFile) as f:
            data = json.loads(f.read())
            
            # Set default
            data[&quot;sqlalchemy&quot;] = data.get(&quot;sqlalchemy&quot;, {})
            
            # Update the plugins
            data[&quot;sqlalchemy&quot;][&quot;connectUrl&quot;] = URL
            
    else:
        print(&quot;Setting plugins&quot;)
        data = {
            &quot;sqlalchemy&quot;: {
                &quot;connectUrl&quot;: URL,
            }
        }
    
    if not exists(dirname(cfgFile)):
        makedirs(dirname(cfgFile))
        
    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccconfigurerecoveryadminuser">
                            <a href="#peekv3linpccconfigurerecoveryadminuser">
                                <strong>Step 7.18.9.5 -</strong> Peek v3 LIN PCC Configure Recovery Admin User
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove

cfgFile = &quot;%s/peek-logic-service.home/config.json&quot; % expanduser(&quot;~&quot;)
print(&quot;Configuring &quot; + cfgFile)

if exists(cfgFile):
    print(&quot;Updating plugins&quot;)
    with open(cfgFile) as f:
        data = json.loads(f.read())
        
else:
    if not exists(dirname(cfgFile)):
        makedirs(dirname(cfgFile))
        
    print(&quot;Setting plugins&quot;)
    data = {}
        
# Update the login
data[&quot;httpServer&quot;] = data.get(&quot;httpServer&quot;, {})
data[&quot;httpServer&quot;][&quot;admin&quot;] = data[&quot;httpServer&quot;].get(&quot;admin&quot;, {})
data[&quot;httpServer&quot;][&quot;admin&quot;][&quot;recovery_user&quot;] = {
    &quot;password&quot;: &quot;{peekRecoveryAdminUser.password}&quot;,
    &quot;username&quot;: &quot;{peekRecoveryAdminUser.user}&quot;
}
    
print(&quot;Writing config&quot;)
with open(cfgFile, &quot;w&quot;) as f:
    f.write(json.dumps(data, indent=4))
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccupdatefilesystempaths">
                            <a href="#peekv3linpccupdatefilesystempaths">
                                <strong>Step 7.18.9.6 -</strong> Peek v3 LIN PCC Update File System Paths
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove

homeDir = expanduser(&quot;~&quot;)

services = [&quot;logic&quot;, &quot;agent&quot;, &quot;worker&quot;, &quot;office&quot;, &quot;field&quot;]


def fixPath(path, service):
    # Strip of the c:
    if &quot;:&quot; in path:
        path = path.split(&quot;:&quot;, 1)[1]

    # Ensure the separators are RHEL format
    path = path.replace(&quot;\\&quot;, &quot;/&quot;)
    
    # Rehome the path.
    serviceDirName = &quot;peek-%s-service.home&quot; % service
    
    if serviceDirName not in path:
        return path
        
    path = path[path.index(serviceDirName) + len(serviceDirName):].strip(&#x27;/&#x27;)
    
    return &quot;%s/peek-%s-service.home/%s&quot; % (homeDir, service, path)


for service in services:
    cfgFile = &quot;%s/peek-%s-service.home/config.json&quot; % (homeDir, service)

    if not exists(cfgFile):
        print(&quot;Skipping non-existent &quot; + cfgFile)
        continue
    
    print(&quot;Configuring &quot; + cfgFile)
    with open(cfgFile) as f:
        data = json.loads(f.read())
        
        if &quot;disk&quot; in data and &quot;tmp&quot; in data[&quot;disk&quot;]:
            data[&quot;disk&quot;][&quot;tmp&quot;] = fixPath(data[&quot;disk&quot;][&quot;tmp&quot;], service)

        if &quot;frontend&quot; in data:
            frontend = data[&quot;frontend&quot;]
            keys = [&quot;frontendCustomisations&quot;,
                    &quot;frontendNodeModuleOverlayDir&quot;,
                    &quot;frontendSrcOverlayDir&quot;]
                    
            for key in keys:
                if key in frontend:
                    frontend[key] = fixPath(frontend[key], service)
                
            data[&quot;frontend&quot;] = frontend
        
        if &quot;plugin&quot; in data and &quot;dataPath&quot; in data[&quot;plugin&quot;]:
            data[&quot;plugin&quot;][&quot;dataPath&quot;] = fixPath(data[&quot;plugin&quot;][&quot;dataPath&quot;], service)

            
    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccupdatefieldofficeappkeys">
                            <a href="#peekv3linpccupdatefieldofficeappkeys">
                                <strong>Step 7.18.9.7 -</strong> Peek v3 LIN PCC Update Field Office App Keys
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove


cfgFile = expanduser(&quot;~/peek-field-service.home/config.json&quot;)

if exists(cfgFile):
    print(&quot;Configuring &quot; + cfgFile)
    with open(cfgFile) as f:
        data = json.loads(f.read())
        
        if &quot;frontend&quot; in data and &quot;nativescriptBuildPrepareEnabled&quot; in data[&quot;frontend&quot;]:
            del data[&quot;frontend&quot;][&quot;nativescriptBuildPrepareEnabled&quot;]
        
        if &quot;httpServer&quot; in data and &quot;office&quot; in data[&quot;httpServer&quot;]:
            del data[&quot;httpServer&quot;][&quot;office&quot;]
        
        if &quot;server&quot; in data:
            if &quot;webSocketPort&quot; in data[&quot;server&quot;]:
                del data[&quot;server&quot;][&quot;webSocketPort&quot;]
            
            if &quot;docSitePort&quot; in data[&quot;server&quot;]:
                del data[&quot;server&quot;][&quot;docSitePort&quot;]
    
            if &quot;desktopSitePort&quot; in data[&quot;server&quot;]:
                del data[&quot;server&quot;][&quot;desktopSitePort&quot;]
    
            if &quot;mobileSitePort&quot; in data[&quot;server&quot;]:
                data[&quot;server&quot;][&quot;fieldSitePort&quot;] = data[&quot;server&quot;][&quot;mobileSitePort&quot;]
                del data[&quot;server&quot;][&quot;mobileSitePort&quot;]

            
    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))



cfgFile = expanduser(&quot;~/peek-office-service.home/config.json&quot;)

if exists(cfgFile):
    print(&quot;Configuring &quot; + cfgFile)
    with open(cfgFile) as f:
        data = json.loads(f.read())
        
        if &quot;frontend&quot; in data and &quot;nativescriptBuildPrepareEnabled&quot; in data[&quot;frontend&quot;]:
            del data[&quot;frontend&quot;][&quot;nativescriptBuildPrepareEnabled&quot;]
        
        if &quot;httpServer&quot; in data and &quot;field&quot; in data[&quot;httpServer&quot;]:
            del data[&quot;httpServer&quot;][&quot;field&quot;]
        
        if &quot;server&quot; in data:
            if &quot;webSocketPort&quot; in data[&quot;server&quot;]:
                del data[&quot;server&quot;][&quot;webSocketPort&quot;]
            
            if &quot;docSitePort&quot; in data[&quot;server&quot;]:
                del data[&quot;server&quot;][&quot;docSitePort&quot;]
    
            if &quot;desktopSitePort&quot; in data[&quot;server&quot;]:
                data[&quot;server&quot;][&quot;officeSitePort&quot;] = data[&quot;server&quot;][&quot;desktopSitePort&quot;]
                del data[&quot;server&quot;][&quot;desktopSitePort&quot;]
    
            if &quot;mobileSitePort&quot; in data[&quot;server&quot;]:
                del data[&quot;server&quot;][&quot;mobileSitePort&quot;]

            
    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccupdatehomepaths">
                            <a href="#peekv3linpccupdatehomepaths">
                                <strong>Step 7.18.9.8 -</strong> Peek v3 LIN PCC Update Home Paths
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
F=&quot;peek-logic-service.home/config.json&quot;
[ -f ${F} ] &amp;&amp; sed -i &#x27;s|peek-server.home|peek-logic-service.home|g&#x27; ${F}

F=&quot;peek-worker-service.home/config.json&quot;
[ -f ${F} ] &amp;&amp; sed -i &#x27;s|peek-worker.home|peek-worker-service.home|g&#x27; ${F}

F=&quot;peek-agent-service.home/config.json&quot;
[ -f ${F} ] &amp;&amp; sed -i &#x27;s|peek-agent.home|peek-agent-service.home|g&#x27; ${F}

F=&quot;peek-office-service.home/config.json&quot;
[ -f ${F} ] &amp;&amp; sed -i &#x27;s|peek-client.home|peek-office-service.home|g&#x27; ${F}

F=&quot;peek-field-service.home/config.json&quot;
[ -f ${F} ] &amp;&amp; sed -i &#x27;s|peek-client.home|peek-field-service.home|g&#x27; ${F}
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccupdatepofpluginnames">
                            <a href="#peekv3linpccupdatepofpluginnames">
                                <strong>Step 7.18.9.9 -</strong> Peek v3 LIN PCC Update PoF Plugin Names
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
sed -i &#x27;s/peek_plugin_pof/peek_plugin_enmac/g&#x27; peek*.home/config.json
sed -i &#x27;s/peek_plugin_pon/peek_plugin_enmac/g&#x27; peek*.home/config.json
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpcccleanupoldsettings">
                            <a href="#peekv3linpcccleanupoldsettings">
                                <strong>Step 7.18.9.10 -</strong> Peek v3 LIN PCC Cleanup Old Settings
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove

homeDir = expanduser(&quot;~&quot;)

services = [&quot;logic&quot;, &quot;agent&quot;, &quot;worker&quot;, &quot;office&quot;, &quot;field&quot;]

for service in services:
    cfgFile = &quot;%s/peek-%s-service.home/config.json&quot; % (homeDir, service)
    print(&quot;Configuring &quot; + cfgFile)

    if not exists(cfgFile):
        continue
    
    print(&quot;Cleaning plugins&quot;)
    with open(cfgFile) as f:
        data = json.loads(f.read())
        
        # Set default
        plugin = data.get(&quot;plugin&quot;)
        
        for key in list(plugin):
            if key.startswith(&quot;peek_plugin&quot;) or key.startswith(&quot;peek_core&quot;):
                del plugin[key]
                
        data[&quot;plugin&quot;] = plugin
        
        if service == &quot;logic&quot;:
            if &quot;platform&quot; in data:
                del data[&quot;platform&quot;]
                
            if &quot;server&quot; in data:
                del data[&quot;server&quot;]
            
    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccenableproductionfrontends">
                            <a href="#peekv3linpccenableproductionfrontends">
                                <strong>Step 7.18.9.11 -</strong> Peek v3 LIN PCC Enable Production Frontends
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove

homeDir = expanduser(&quot;~&quot;)

services = [&quot;logic&quot;, &quot;office&quot;, &quot;field&quot;]

for service in services:
    cfgFile = &quot;%s/peek-%s-service.home/config.json&quot; % (homeDir, service)
    print(&quot;Configuring &quot; + cfgFile)

    if not exists(cfgFile):
        continue
    
    with open(cfgFile) as f:
        data = json.loads(f.read())
        
        # Set default
        print(&quot;Setting Production Flags for Frontend&quot;)
        frontend = data.get(&quot;frontend&quot;, {})
        frontend[&quot;docBuildEnabled&quot;] = True
        frontend[&quot;docBuildPrepareEnabled&quot;] = True
        frontend[&quot;docSyncFilesForDebugEnabled&quot;] = False
        
        frontend[&quot;webBuildPrepareEnabled&quot;] = True
        frontend[&quot;webBuildEnabled&quot;] = True
        frontend[&quot;syncFilesForDebugEnabled&quot;] = False

            
    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccenableproductionlogging">
                            <a href="#peekv3linpccenableproductionlogging">
                                <strong>Step 7.18.9.12 -</strong> Peek v3 LIN PCC Enable Production Logging
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove

homeDir = expanduser(&quot;~&quot;)

services = [&quot;logic&quot;, &quot;office&quot;, &quot;field&quot;, &quot;agent&quot;, &quot;worker&quot;]

for service in services:
    cfgFile = &quot;%s/peek-%s-service.home/config.json&quot; % (homeDir, service)
    print(&quot;Configuring &quot; + cfgFile)

    if not exists(cfgFile):
        continue
    
    with open(cfgFile) as f:
        data = json.loads(f.read())

        # Set default
        print(&quot;Setting Production Flags for Logging&quot;)
        frontend = data.get(&quot;logging&quot;, {})
        frontend[&quot;rotateSizeMb&quot;] = 20
        frontend[&quot;rotationsToKeep&quot;] = 10
        frontend[&quot;level&quot;] = &quot;INFO&quot;
        frontend[&quot;debugMemoryMask&quot;] = 0
        frontend[&quot;logToStdout&quot;] = False
        
        frontend[&quot;syslog&quot;] = frontend.get(&quot;syslog&quot;, {})
        frontend[&quot;syslog&quot;][&quot;logToSysloyHost&quot;] = None

    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpccenableproductionworker">
                            <a href="#peekv3linpccenableproductionworker">
                                <strong>Step 7.18.9.13 -</strong> Peek v3 LIN PCC Enable Production Worker
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
import json
from os.path import expanduser, exists, dirname
from os import makedirs, remove

homeDir = expanduser(&quot;~&quot;)

services = [&quot;logic&quot;]

for service in services:
    cfgFile = &quot;%s/peek-%s-service.home/config.json&quot; % (homeDir, service)
    print(&quot;Configuring &quot; + cfgFile)

    if not exists(cfgFile):
        continue
    
    with open(cfgFile) as f:
        data = json.loads(f.read())
        
        # Set default
        print(&quot;Enabling Celery Worker&quot;)
        data[&quot;celery&quot;] = data.get(&quot;celery&quot;, {})
        data[&quot;celery&quot;][&quot;plpython&quot;] = data[&quot;celery&quot;].get(&quot;plpython&quot;, {})
        data[&quot;celery&quot;][&quot;plpython&quot;][&quot;enable&quot;] = False

            
    print(&quot;Writing config&quot;)
    with open(cfgFile, &quot;w&quot;) as f:
        f.write(json.dumps(data, indent=4))
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrunlockwebappbuild">
                            <a href="#peekv3linpdrunlockwebappbuild">
                                <strong>Step 7.18.10 -</strong> Peek v3 LIN PDR Unlock WebApp Build
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
# Remove ngcc lock file to allow WebApp Build
cd /home/peek/synerty-peek*/lib/python*/site-packages/peek_admin_app

rm -v node_modules/@angular/compiler-cli/ngcc/__ngcc_lock_file__ \
    || echo &quot;Can&#x27;t remove lock file, it may have been arleady removed&quot;
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrdroppeekstorageservicefixbuginpeek">
                            <a href="#peekv3linpdrdroppeekstorageservicefixbuginpeek">
                                <strong>Step 7.18.11 -</strong> Peek v3 LIN PDR Drop Peek Storage Service (FIX BUG IN PEEK)
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            <p>This is a workaround, Fix peek instead.</p>
<p>Dropping this storage service means Peek won't have to migrate the schema, it will just recreate it.</p>
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
psql &lt;&lt;&lt; &quot;DROP SCHEMA peek_storage_service CASCADE;&quot;
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrupgradetimescaledb">
                            <a href="#peekv3linpdrupgradetimescaledb">
                                <strong>Step 7.18.12 -</strong> Peek v3 LIN PDR Upgrade TimescaleDB
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
psql -X &lt;&lt;EOF
DROP EXTENSION timescaledb CASCADE;
EOF

psql -X &lt;&lt;EOF
CREATE EXTENSION timescaledb ;
EOF
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrmigratedatabase">
                            <a href="#peekv3linpdrmigratedatabase">
                                <strong>Step 7.18.13 -</strong> Peek v3 LIN PDR Migrate Database
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
LOG=&quot;peek-logic-service.log&quot;

echo &quot;Cleaning old logs&quot;
[ ! -f $LOG ] || rm $LOG
touch $LOG

# Starting migration
sudo systemctl restart peek_logic

echo &quot;Waiting for Peek Logic Service to finish starting.&quot;
while ! grep &quot;Peek Logic is running&quot; $LOG
do
    echo &quot;Checking ...&quot;
    sleep 5
done

# Check for Errors
if grep -q &quot;ERROR&quot; $LOG
then
    cat $LOG
    echo &quot;The Peek Logic Service started with errors&quot; &gt;&amp;2
    false
fi

echo &quot;SUCCESS The Peek Logic Service started without errors&quot;

echo &quot;Stopping Peek Logic Service again&quot;
sudo systemctl stop peek_logic
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrupdateappservers">
                            <a href="#peekv3linpdrupdateappservers">
                                <strong>Step 7.18.14 -</strong> Peek v3 LIN PDR Update App Servers
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
psql &lt;&lt;&quot;EOF&quot;


-- PoF Diagram Loader
DO $$
BEGIN
    IF EXISTS(
        SELECT schema_name
          FROM information_schema.schemata
          WHERE schema_name = &#x27;pl_enmac_diagram_loader&#x27;
     )
    THEN
		INSERT INTO pl_enmac_diagram_loader.&quot;AppServerSettingsTuple&quot;
			(&quot;appHost&quot;, &quot;appSshUsername&quot;, &quot;appSshPassword&quot;,
			    &quot;appOracleUsername&quot;, &quot;appOraclePassword&quot;,
			    &quot;enabled&quot;, &quot;environmentName&quot;)
		SELECT &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, false, &#x27;replace_me&#x27;
		FROM (SELECT 1) as data
		WHERE NOT EXISTS (SELECT * FROM pl_enmac_diagram_loader.&quot;AppServerSettingsTuple&quot;);

		UPDATE pl_enmac_diagram_loader.&quot;AppServerSettingsTuple&quot;
		SET &quot;appHost&quot; = &#x27;{appServer.ip}&#x27;,
			&quot;appSshUsername&quot; = &#x27;{linuxAdmsUser.user}&#x27;,
			&quot;appSshPassword&quot; = &#x27;{linuxAdmsUser.password}&#x27;,
			&quot;appOracleUsername&quot; = &#x27;pofinfo&#x27;,
			&quot;appOraclePassword&quot; = &#x27;{oraclePofinfoAtNms.password}&#x27;,
			&quot;environmentName&quot; = &#x27;{peekEnmacEnvironmentName}&#x27;;
    END IF;
END
$$;


-- PoF Equipment Loader
DO $$
BEGIN
    IF EXISTS(
        SELECT schema_name
          FROM information_schema.schemata
          WHERE schema_name = &#x27;pl_enmac_equipment_loader&#x27;
     )
    THEN
		INSERT INTO pl_enmac_equipment_loader.&quot;AppServerSettings&quot;
			(&quot;appHost&quot;, &quot;appOracleUsername&quot;, &quot;appOraclePassword&quot;, &quot;enabled&quot;)
		SELECT &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, false
		FROM (SELECT 1) as data
		WHERE NOT EXISTS (SELECT * FROM pl_enmac_equipment_loader.&quot;AppServerSettings&quot;);

		UPDATE pl_enmac_equipment_loader.&quot;AppServerSettings&quot;
		SET &quot;appHost&quot; = &#x27;{appServer.ip}&#x27;,
			&quot;appOracleUsername&quot; = &#x27;pofinfo&#x27;,
			&quot;appOraclePassword&quot; = &#x27;{oraclePofinfoAtNms.password}&#x27;;
    END IF;
END
$$;


-- PoN Event Loader
DO $$
BEGIN
    IF EXISTS(
        SELECT schema_name
          FROM information_schema.schemata
          WHERE schema_name = &#x27;pl_enmac_event_loader&#x27;
     )
    THEN
		INSERT INTO pl_enmac_event_loader.&quot;AppServerSettings&quot;
			(&quot;appHost&quot;, &quot;appOracleUsername&quot;, &quot;appOraclePassword&quot;, &quot;enabled&quot;)
		SELECT &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, false
		FROM (SELECT 1) as data
		WHERE NOT EXISTS (SELECT * FROM pl_enmac_event_loader.&quot;AppServerSettings&quot;);

		UPDATE pl_enmac_event_loader.&quot;AppServerSettings&quot;
		SET &quot;appHost&quot; = &#x27;{appServer.ip}&#x27;,
			&quot;appOracleUsername&quot; = &#x27;pofinfo&#x27;,
			&quot;appOraclePassword&quot; = &#x27;{oraclePofinfoAtNms.password}&#x27;;
    END IF;
END
$$;



-- PoF Switching Loader
DO $$
BEGIN
    IF EXISTS(
        SELECT schema_name
          FROM information_schema.schemata
          WHERE schema_name = &#x27;pl_enmac_switching_loader&#x27;
     )
    THEN
		INSERT INTO pl_enmac_switching_loader.&quot;AppServerSettings&quot;
			(&quot;appHost&quot;, &quot;appOracleUsername&quot;, &quot;appOraclePassword&quot;, &quot;enabled&quot;)
		SELECT &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, false
		FROM (SELECT 1) as data
		WHERE NOT EXISTS (SELECT * FROM pl_enmac_switching_loader.&quot;AppServerSettings&quot;);

		UPDATE pl_enmac_switching_loader.&quot;AppServerSettings&quot;
		SET &quot;appHost&quot; = &#x27;{appServer.ip}&#x27;,
			&quot;appOracleUsername&quot; = &#x27;pofinfo&#x27;,
			&quot;appOraclePassword&quot; = &#x27;{oraclePofinfoAtNms.password}&#x27;;
    END IF;
END
$$;



-- PoF GIS Location Loader
DO $$
BEGIN
    IF EXISTS(
        SELECT schema_name
          FROM information_schema.schemata
          WHERE schema_name = &#x27;pl_enmac_gis_location_loader&#x27;
     )
    THEN
		INSERT INTO pl_enmac_gis_location_loader.&quot;AppServerSettingsTuple&quot;
			(&quot;appHost&quot;, &quot;appOracleUsername&quot;, &quot;appOraclePassword&quot;, &quot;enabled&quot;)
		SELECT &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, false
		FROM (SELECT 1) as data
		WHERE NOT EXISTS (SELECT * FROM pl_enmac_gis_location_loader.&quot;AppServerSettingsTuple&quot;);

		UPDATE pl_enmac_gis_location_loader.&quot;AppServerSettingsTuple&quot;
		SET &quot;appHost&quot; = &#x27;{appServer.ip}&#x27;,
			&quot;appOracleUsername&quot; = &#x27;pofinfo&#x27;,
			&quot;appOraclePassword&quot; = &#x27;{oraclePofinfoAtNms.password}&#x27;;
    END IF;
END
$$;

-- PoF User Loader
DO $$
BEGIN
    IF EXISTS(
        SELECT schema_name
          FROM information_schema.schemata
          WHERE schema_name = &#x27;pl_enmac_user_loader&#x27;
     )
    THEN
		INSERT INTO pl_enmac_user_loader.&quot;AppServerSettingsTuple&quot;
			(&quot;appHost&quot;, &quot;appOracleUsername&quot;, &quot;appOraclePassword&quot;, &quot;enabled&quot;)
		SELECT &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, false
		FROM (SELECT 1) as data
		WHERE NOT EXISTS (SELECT * FROM pl_enmac_user_loader.&quot;AppServerSettingsTuple&quot;);

		UPDATE pl_enmac_user_loader.&quot;AppServerSettingsTuple&quot;
		SET &quot;appHost&quot; = &#x27;{appServer.ip}&#x27;,
			&quot;appOracleUsername&quot; = &#x27;pofinfo&#x27;,
			&quot;appOraclePassword&quot; = &#x27;{oraclePofinfoAtNms.password}&#x27;;
    END IF;
END
$$;



-- PoF LiveDB Loader
DO $$
BEGIN
    IF EXISTS(
        SELECT schema_name
          FROM information_schema.schemata
          WHERE schema_name = &#x27;pl_enmac_livedb_loader&#x27;
     )
    THEN
		INSERT INTO pl_enmac_livedb_loader.&quot;AppServerSettingsTuple&quot;
			(&quot;appHost&quot;, &quot;appOracleUsername&quot;, &quot;appOraclePassword&quot;, &quot;enabled&quot;)
		SELECT &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, false
		FROM (SELECT 1) as data
		WHERE NOT EXISTS (SELECT * FROM pl_enmac_livedb_loader.&quot;AppServerSettingsTuple&quot;);

		UPDATE pl_enmac_livedb_loader.&quot;AppServerSettingsTuple&quot;
		SET &quot;appHost&quot; = &#x27;{appServer.ip}&#x27;,
			&quot;appOracleUsername&quot; = &#x27;pofinfo&#x27;,
			&quot;appOraclePassword&quot; = &#x27;{oraclePofinfoAtNms.password}&#x27;;
    END IF;
END
$$;



-- PoF GraphDB Loader
DO $$
BEGIN
    IF EXISTS(
        SELECT schema_name
          FROM information_schema.schemata
          WHERE schema_name = &#x27;pl_enmac_graphdb_loader&#x27;
     )
    THEN
		INSERT INTO pl_enmac_graphdb_loader.&quot;AppServerSettings&quot;
			(&quot;appHost&quot;, &quot;appOracleUsername&quot;, &quot;appOraclePassword&quot;, &quot;enabled&quot;)
		SELECT &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, &#x27;replace_me&#x27;, false
		FROM (SELECT 1) as data
		WHERE NOT EXISTS (SELECT * FROM pl_enmac_graphdb_loader.&quot;AppServerSettings&quot;);

		UPDATE pl_enmac_graphdb_loader.&quot;AppServerSettings&quot;
		SET &quot;appHost&quot; = &#x27;{appServer.ip}&#x27;,
			&quot;appOracleUsername&quot; = &#x27;pofinfo&#x27;,
			&quot;appOraclePassword&quot; = &#x27;{oraclePofinfoAtNms.password}&#x27;;
    END IF;
END
$$;



-- PoF SOAP
DO $$
BEGIN
    IF EXISTS(
        SELECT schema_name
          FROM information_schema.schemata
          WHERE schema_name = &#x27;pl_enmac_soap&#x27;
     )
    THEN
		UPDATE pl_enmac_soap.&quot;SettingProperty&quot;
		SET &quot;char_value&quot; = &#x27;http://{appServer.ip}:80/enmac/SOAP/&#x27;
		WHERE &quot;key&quot; = &#x27;agent.enmac.soap.url&#x27;;
    END IF;
END
$$;



-- PoF SQL
DO $$
BEGIN
    IF EXISTS(
        SELECT schema_name
          FROM information_schema.schemata
          WHERE schema_name = &#x27;pl_enmac_sql&#x27;
     )
    THEN
		UPDATE pl_enmac_sql.&quot;SettingProperty&quot;
		SET &quot;char_value&quot; = &#x27;{appServer.ip}&#x27;
		WHERE &quot;key&quot; = &#x27;agent.oracle.host&#x27;;

		UPDATE pl_enmac_sql.&quot;SettingProperty&quot;
		SET &quot;char_value&quot; = &#x27;pofinfo&#x27;
		WHERE &quot;key&quot; = &#x27;agent.oracle.user&#x27;;

		UPDATE pl_enmac_sql.&quot;SettingProperty&quot;
		SET &quot;char_value&quot; = &#x27;{oraclePofinfoAtNms.password}&#x27;
		WHERE &quot;key&quot; = &#x27;agent.oracle.pass&#x27;;
    END IF;
END
$$;




EOF
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrupdategistilespath">
                            <a href="#peekv3linpdrupdategistilespath">
                                <strong>Step 7.18.15 -</strong> Peek v3 LIN PDR Update GIS Tiles Path
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
psql &lt;&lt;EOF

-- GIS Diagram Loader
UPDATE pl_gis_diagram_loader.&quot;DxfImportSettingsTuple&quot;
SET &quot;dxfDirectory&quot; = &#x27;/home/peek/gis_tiles&#x27;;

EOF
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3purgerabbitmq">
                            <a href="#peekv3purgerabbitmq">
                                <strong>Step 7.18.16 -</strong> Peek v3 Purge RabbitMQ
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            <p>Requeues RabbitMQ </p>
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxrootuser}@{peekserver}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
redis-cli FLUSHDB &amp;&amp; \
rabbitmqctl stop_app &amp;&amp; \
rabbitmqctl reset &amp;&amp; \
rabbitmqctl start_app &amp;&amp; \
systemctl restart rabbitmq-server.service
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdredeleteoldlogs">
                            <a href="#peekv3linpdredeleteoldlogs">
                                <strong>Step 7.18.17 -</strong> Peek v3 LIN PDRE Delete Old Logs
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {linuxpeekuser}@{peekserver}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
rm -f *.log*
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrcleanrestoredir">
                            <a href="#peekv3linpdrcleanrestoredir">
                                <strong>Step 7.18.18 -</strong> Peek v3 LIN PDR Clean Restore Dir
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd /backup

if [ -d restore ]; then
    echo &quot;Cleaning restore directory&quot;
    rm -rf restore
else
    echo &quot;No cleaning required&quot;
fi
                </code>
            </pre>
        </div>
    </div>







        



                    <div class="row pt-5">
                        <h3 id="peekv3lindeploygistilesnzte">
                            <a href="#peekv3lindeploygistilesnzte">
                                <strong>Step 8 -</strong> Peek v3 LIN Deploy GIS Tiles (NZTE)
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3lincleanupgistilesarchive">
                            <a href="#peekv3lincleanupgistilesarchive">
                                <strong>Step 8.1 -</strong> Peek v3 LIN Cleanup GIS Tiles Archive
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd /backup

if [ -d gis_tiles ]; then
    echo &quot;Cleaning restore directory&quot;
    rm -rf gis_tiles
else
    echo &quot;No cleaning required&quot;
fi
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3lindeploygistilesarchive">
                            <a href="#peekv3lindeploygistilesarchive">
                                <strong>Step 8.2 -</strong> Peek v3 LIN Deploy GIS Tiles Archive
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    

    



    <div class="row">
        <p>
            <p>The initial set of GIS tiles to build a peek server with.</p>
        </p>
        <p>
            Copy the File(s)
            <strong>Peek_GIS_Tiles_NTE.tar</strong>
            to the target node.
        </p>
        <p>
            <strong>Extract and deploy the File(s)</strong> here:
        </p>
    </div>
    <div class="row py-1">
        <code class="language-bash">
/backup/gis_tiles
        </code>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3lininstallgistilesarchive">
                            <a href="#peekv3lininstallgistilesarchive">
                                <strong>Step 8.3 -</strong> Peek v3 LIN Install GIS Tiles Archive
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd /backup/gis_tiles

if [ &quot;`ls *.7z | wc -l`&quot; -ne &quot;1&quot; ]; then
    echo &quot;We expect only one file ending in *.7z&quot;
    ls *.7z
    false
fi

7z x -bt -mmt8 *.7z

mv -v gis_tiles /home/peek
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="peekv3lincleanupgistilesarchive">
                            <a href="#peekv3lincleanupgistilesarchive">
                                <strong>Step 8.4 -</strong> Peek v3 LIN Cleanup GIS Tiles Archive
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cd /backup

if [ -d gis_tiles ]; then
    echo &quot;Cleaning restore directory&quot;
    rm -rf gis_tiles
else
    echo &quot;No cleaning required&quot;
fi
                </code>
            </pre>
        </div>
    </div>






        



                    <div class="row pt-5">
                        <h4 id="peekv3linpdredeleteoldlogs">
                            <a href="#peekv3linpdredeleteoldlogs">
                                <strong>Step 9 -</strong> Peek v3 LIN PDRE Delete Old Logs
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
rm -f *.log*
                </code>
            </pre>
        </div>
    </div>





        



                    <div class="row pt-5">
                        <h4 id="peekv3linpdrstartpeek">
                            <a href="#peekv3linpdrstartpeek">
                                <strong>Step 10 -</strong> Peek v3 LIN PDR Start Peek
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
restart_peek.sh
                </code>
            </pre>
        </div>
    </div>

    <div class="row">
        <p>
            This script may require you to answer the following prompts:
        </p>
    </div>
    <div class="row">
        <table>
            <thead>
                <tr>
                    <th>
                        Prompt
                    </th>
                    <th class="prompts">
                        Answer
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        password:
                    </td>
                    <td class="prompts">
                        <code class="language-sql">
{linuxPeekUser.password}
                        </code>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>




        



                    <div class="row pt-5">
                        <h3 id="peekv3lintestpeekdeployment">
                            <a href="#peekv3lintestpeekdeployment">
                                <strong>Step 11 -</strong> Peek v3 LIN Test Peek Deployment
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h3 id="peekv3lintpdtestpeeklogic">
                            <a href="#peekv3lintpdtestpeeklogic">
                                <strong>Step 11.1 -</strong> Peek v3 LIN TPD Test Peek Logic
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3lintpdlogicteststart">
                            <a href="#peekv3lintpdlogicteststart">
                                <strong>Step 11.1.1 -</strong> Peek v3 LIN TPD LOGIC Test Start
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
if [ &quot;{peekEnableLogic}&quot; -eq 0 ];
then
    echo &quot;Logic not installed&quot;
else

    LOG=&quot;peek-logic-service.log&quot;
    STARTED_STR=&quot;Logic&quot;
    
    while :
    do
        if grep &quot;Peek ${STARTED_STR} is running, version=&quot; ${LOG}*
        then
            echo &quot;Peek is running&quot;
            break
        fi
        
        if grep &quot;ERROR&quot; ${LOG}*
        then
            echo &quot;FAILED, peek thrown errors while starting&quot; &gt;&amp;2
            tail -n30 $LOG
            false
        fi
        
        sleep 2s
    done
    
    if grep &quot;ERROR&quot; ${LOG}*
    then
        echo &quot;FAILED, peek has started with errors&quot; &gt;&amp;2
        tail -n30 $LOG
        false
    fi
    
    echo &quot;SUCCESS, Peek has started with no errors&quot;
fi
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="peekv3lintpdtestpeekagent">
                            <a href="#peekv3lintpdtestpeekagent">
                                <strong>Step 11.2 -</strong> Peek v3 LIN TPD Test Peek Agent
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3lintpdagentteststart">
                            <a href="#peekv3lintpdagentteststart">
                                <strong>Step 11.2.1 -</strong> Peek v3 LIN TPD AGENT Test Start
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
if [ &quot;{peekEnableAgent}&quot; -eq 0 ];
then
    echo &quot;Agent not installed&quot;
else
    LOG=&quot;peek-agent-service.log&quot;
    STARTED_STR=&quot;Agent&quot;
    
    while :
    do
        if grep &quot;Peek ${STARTED_STR} is running, version=&quot; ${LOG}*
        then
            echo &quot;Peek is running&quot;
            break
        fi
        
        if grep &quot;ERROR&quot; ${LOG}*
        then
            echo &quot;FAILED, peek thrown errors while starting&quot; &gt;&amp;2
            tail -n30 $LOG
            false
        fi
        
        sleep 2s
    done
    
    if grep &quot;ERROR&quot; ${LOG}*
    then
        echo &quot;FAILED, peek has started with errors&quot; &gt;&amp;2
        false
    fi
    
    echo &quot;SUCCESS, Peek has started wit no errors&quot;
fi
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="peekv3lintpdtestpeekworker">
                            <a href="#peekv3lintpdtestpeekworker">
                                <strong>Step 11.3 -</strong> Peek v3 LIN TPD Test Peek Worker
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3lintpdworkerteststart">
                            <a href="#peekv3lintpdworkerteststart">
                                <strong>Step 11.3.1 -</strong> Peek v3 LIN TPD WORKER Test Start
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
if [ &quot;{peekEnableWorker}&quot; -eq 0 ];
then
    echo &quot;Worker not installed&quot;
else
    LOG=&quot;peek-worker-service.log&quot;
    STARTED_STR=&quot;Worker&quot;
    
    while :
    do
        if grep &quot;Peek ${STARTED_STR} is running, version=&quot; ${LOG}*
        then
            echo &quot;Peek is running&quot;
            break
        fi
        
        if grep &quot;ERROR&quot; ${LOG}*
        then
            echo &quot;FAILED, peek thrown errors while starting&quot; &gt;&amp;2
            false
        fi
        
        sleep 2s
    done
    
    if grep &quot;ERROR&quot; ${LOG}*
    then
        echo &quot;FAILED, peek has started with errors&quot; &gt;&amp;2
        false
    fi
    
    echo &quot;SUCCESS, Peek has started wit no errors&quot;
fi
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="peekv3lintpdtestpeekfield">
                            <a href="#peekv3lintpdtestpeekfield">
                                <strong>Step 11.4 -</strong> Peek v3 LIN TPD Test Peek Field
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3lintpdfieldteststart">
                            <a href="#peekv3lintpdfieldteststart">
                                <strong>Step 11.4.1 -</strong> Peek v3 LIN TPD FIELD Test Start
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
if [ &quot;{peekEnableField}&quot; -eq 0 ];
then
    echo &quot;Field not installed&quot;
else
    LOG=&quot;peek-field-service.log&quot;
    STARTED_STR=&quot;Field&quot;
    
    while :
    do
        if grep &quot;Peek ${STARTED_STR} is running, version=&quot; ${LOG}*
        then
            echo &quot;Peek is running&quot;
            break
        fi
        
        if grep &quot;ERROR&quot; ${LOG}*
        then
            echo &quot;FAILED, peek thrown errors while starting&quot; &gt;&amp;2
            false
        fi
        
        sleep 2s
    done
    
    if grep &quot;ERROR&quot; ${LOG}*
    then
        echo &quot;FAILED, peek has started with errors&quot; &gt;&amp;2
        false
    fi
    
    echo &quot;SUCCESS, Peek has started wit no errors&quot;
fi
                </code>
            </pre>
        </div>
    </div>






    



                    <div class="row pt-5">
                        <h3 id="peekv3lintpdtestpeekoffice">
                            <a href="#peekv3lintpdtestpeekoffice">
                                <strong>Step 11.5 -</strong> Peek v3 LIN TPD Test Peek Office
                            </a>
                        </h3>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="peekv3lintpdofficeteststart">
                            <a href="#peekv3lintpdofficeteststart">
                                <strong>Step 11.5.1 -</strong> Peek v3 LIN TPD OFFICE Test Start
                            </a>
                        </h4>
                    </div>

                    <div class="blueprint-description row">
                        <p>
                            
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
if [ &quot;{peekEnableOffice}&quot; -eq 0 ];
then
    echo &quot;Field not installed&quot;
else
    LOG=&quot;peek-office-service.log&quot;
    STARTED_STR=&quot;Office&quot;
    
    while :
    do
        if grep &quot;Peek ${STARTED_STR} is running, version=&quot; ${LOG}*
        then
            echo &quot;Peek is running&quot;
            break
        fi
        
        if grep &quot;ERROR&quot; ${LOG}*
        then
            echo &quot;FAILED, peek thrown errors while starting&quot; &gt;&amp;2
            false
        fi
        
        sleep 2s
    done
    
    if grep &quot;ERROR&quot; ${LOG}*
    then
        echo &quot;FAILED, peek has started with errors&quot; &gt;&amp;2
        false
    fi
    
    echo &quot;SUCCESS, Peek has started with no errors&quot;
fi
                </code>
            </pre>
        </div>
    </div>








                    <div class="row pt-5">
                        <div class="col">
                            <h3>Completed</h3>
                            <p>
                                You have completed this instruction.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

<!-- Download Attune Ad -->

            <div class="col-lg-2 px-0">
                <div class="container px-0 pt-3 pl-5 sticky-top">
                    <div class="card border-light mb-3" style="max-width: 18rem;">
                        <div class="card-body attune-ad">
                            <img
                                src="https://www.servertribe.com/wp-content/uploads/2022/06/AttuneLogoV2_powered_by.png"
                                alt="Attune - Powered by ServerTribe"
                                class="img-fluid">
                            <h5 class="card-title mt-3 text-center">
                                Automate with Attune
                            </h5>
                            <p class="card-text text-left">
                                Download the Attune Community Edition.
                            </p>
                            <p class="text-center">
                                <a href="https://www.servertribe.com/download-attune-registration/"
                                   class="btn btn-primary mt-3">
                                    DOWNLOAD!!!
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

        </div>

<!-- Join Discord -->

        <div class="row py-5">
            <div class="jumbotron">
                <h1 class="display-4 text-center">
                    Discuss this Instruction in Discord
                </h1>
                <p class="lead">

                    Join our Discord channel and connect with like-minded
                    individuals who
                    share your passion. Engage in lively discussions, gain
                    valuable insights,
                    and stay updated on the latest trends in our industry. Don't
                    miss out on
                    this opportunity to network, learn, and grow together.
                </p>
                <hr class="my-4 text-center">
                <div class="col px-0">
                    <p class="text-center">
                        Click the link below and become a part of our vibrant
                        community on
                        Discord today!
                    </p>
                    <p class="lead text-center">
                        <a class="btn btn-primary btn-lg"
                           href="https://discord.com/invite/3YpJsagqUn"
                           role="button">
                            Join NOW!!!
                        </a>
                    </p>
                </div>
            </div>
        </div>

    </div>
</div>


<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script
    src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script
    src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>

<script
    src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>

<script
    src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
<script
    src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>


</body>
</html>
