# Check if the master's public key is uploaded onto the standby.
PUBLIC_KEY_ON_STANDBY=$(ssh \
    {linuxStandbyPeekUser.user}@{peekStandbyServer.ip} \
    "clear; \
    grep '{linuxPeekUser.user}@{peekServer.hostname}' \
    .ssh/authorized_keys; \
    exit")

OUTPUT=${PUBLIC_KEY_ON_STANDBY}
echo "PUBLIC_KEY_ON_STANDBY=${OUTPUT}"

if [ -z "${OUTPUT}" ]
then
    echo "Uploading public key to standby"
    
    ssh-copy-id \
        {linuxStandbyPeekUser.user}@{peekStandbyServer.ip}
else
    echo "Public key already uploaded, skipping"
fi